!function(){function t(){function t(){}var e,a,r,n=h();return t.width=function(t){return 0===arguments.length?a:(a=t,this)},t.height=function(t){return 0===arguments.length?r:(r=t,this)},t.accept=function(t,e){var a=l(t,e);return"number"==a.type},t.variable=function(t){return 0===arguments.length?e:(e=t,this)},t.domain=function(t){return 0===arguments.length?n.domain():void 0===e?this:(n.domain(d3.extent(t,function(t){return t[e]})),this)},t.ticks=function(){return n.ticks()},t.scale=function(a){return"object"==typeof a?t.scale(a[e]):n(a)},t}function e(){function t(){}var e,a,r,n=g();return t.width=function(t){return 0===arguments.length?a:(a=t,this)},t.height=function(t){return 0===arguments.length?r:(r=t,this)},t.accept=function(t,e){var a=l(t,e);return"categorical"==a.type||"period"==a.type},t.variable=function(t){return 0===arguments.length?e:(e=t,this)},t.domain=function(t,a){if(0===arguments.length)return n.domain();if(void 0===e)return this;var r=l(e,a),i=[];if("categorical"==r.type)i=r.categories.map(function(t){return t.name});else for(var o,s=t.map(function(t){return t[variable]}).sort(),c=0;c<s.length;++c)s[c]!=o&&i.push(s[c]),o=s[c];return n.domain(i),this},t.ticks=function(){return n.ticks()},t.scale=function(t){return n("object"==typeof t?t[e]:t)},t}function a(t){function e(a){var r=e.ticks();if(a.append("rect").attr("class","background").attr("width",e.width()).attr("height",e.height()),t)a.selectAll(".tick").data(r).enter().append("line").attr("class","tick").attr("x1",i).attr("x2",i).attr("y1",0).attr("y2",s.tick_length),a.selectAll(".ticklabel").data(r).enter().append("text").attr("class","ticklabel").attr("x",i).attr("y",s.tick_length+s.tick_padding).text(function(t){return t}).attr("text-anchor","middle").attr("dy","0.71em");else{var n=e.width();a.selectAll(".tick").data(r).enter().append("line").attr("class","tick").attr("x1",n-s.tick_length).attr("x2",n).attr("y1",i).attr("y2",i),a.selectAll(".ticklabel").data(r).enter().append("text").attr("class","ticklabel").attr("x",s.padding).attr("y",i).text(function(t){return t}).attr("text-anchor","begin").attr("dy","0.35em")}}var a,r,n,i=p(),o=t,s={tick_length:5,tick_padding:2,padding:4},c=d3.select("body").append("svg").attr("class","linearaxis dummy").style("visibility","invisible"),u=d(c);return i.label_size(o?u.width:u.height),e.width=function(t){if(o)return 0===arguments.length?r:(r=t,i.range([0,r]),this);if(0===arguments.length){if(void 0===r){for(var e=i.ticks(),a=0,n=0;n<e.length;++n){var l=u.width(e[n]);l>a&&(a=l)}r=a+s.tick_length+s.tick_padding+s.padding}return r}return r=t,this},e.height=function(t){if(o){if(0===arguments.length){if(void 0===n){for(var e=i.ticks(),a=0,r=0;r<e.length;++r){var l=u.height(e[r]);l>a&&(a=l)}n=a+s.tick_length+s.tick_padding+s.padding}return n}return n=t,this}return 0===arguments.length?n:(n=t,i.range([n,0]),this)},e.accept=function(t,e){var a=l(t,e);return"number"==a.type},e.variable=function(t){return 0===arguments.length?a:(a=t,this)},e.domain=function(t){if(0===arguments.length)return i.domain();var e=d3.extent(t,function(t){return t[a]});return i.domain(e).nice(),this},e.ticks=function(){return i.ticks()},e.scale=function(t){return i("object"==typeof t?t[a]:t)},e}function r(){function t(){}function e(t,e,r){if(void 0!==a){var n=l(a,e);void 0!==n.map&&n.map!=i&&(c=!0,d3.json(n.map,function(t){i=n.map,r(t),c=!1}))}}var a,r,n,i,o,s={};t.width=function(t){return 0===arguments.length?r:(u=u||r!=t,r=t,this)},t.height=function(t){return 0===arguments.length?n:(u=u||n!=t,n=t,this)},t.accept=function(t,e){var a=l(t,e);return"string"==a.type},t.variable=function(t){return 0===arguments.length?a:(a=t,this)};var c=!1;t.map_loaded=function(){return!c},t.domain=function(t,r){return 0!==arguments.length?(e(t,r,function(t){o=t,u=!0;var e=l(a,r),n=e.regionid||"id";for(var i in o.features){var c=o.features[i].properties[n];s[c]=i}}),this):void 0},t.scale=function(e){return"object"==typeof e?t.scale(e[a]):(t.update_projection(),h(o.features[s[e]]))};var u=!0,d=d3.geo.transverseMercator().rotate([-5.38720621,-52.1551744]).scale(1).translate([0,0]),h=d3.geo.path().projection(d);return t.update_projection=function(){if(u&&o){d.scale(1).translate([0,0]),h=d3.geo.path().projection(d);var t=h.bounds(o),e=.95/Math.max((t[1][0]-t[0][0])/r,(t[1][1]-t[0][1])/n),a=[(r-e*(t[1][0]+t[0][0]))/2,(n-e*(t[1][1]+t[0][1]))/2];d.scale(e).translate(a),u=!1}},t}function n(){function t(){}var e,a,r=v();return t.width=function(t){return 0===arguments.length?e:(e=t,this)},t.height=function(t){return 0===arguments.length?a:(a=t,this)},t.accept=function(t,e){var a=l(t,e);return"number"==a.type},t.variable=function(t){return 0===arguments.length?variable:(variable=t,this)},t.domain=function(t){return 0===arguments.length?r.domain():void 0===variable?this:(r.domain(d3.extent(t,function(t){return t[variable]})),this)},t.ticks=function(){return r.ticks()},t.scale=function(e){return"object"==typeof e?t.scale(e[variable]):r(e)},t}function i(){function t(){}var e,a,r,n;return t.width=function(t){return 0===arguments.length?a:(a=t,this)},t.height=function(t){return 0===arguments.length?r:(r=t,this)},t.accept=function(t,e){var a=l(t,e);return"categorical"==a.type},t.variable=function(t){return 0===arguments.length?e:(e=t,this)},t.domain=function(t,a){if(0===arguments.length)return n;if(void 0===e)return this;var r=l(e,a);return n=r.categories.map(function(t){return t.name}),this},t.ticks=function(){return n},t.scale=function(t){return n.indexOf(t)},t}function l(t,e){for(var a=0;a<e.fields.length;a++)if(e.fields[a].name==t)return e.fields[a];return void 0}function o(t,e,a){var r,n,i,l;return a.axes=function(){return d3.keys(t)},a.width=function(t){return 0===arguments.length?r:(r=t,this)},a.height=function(t){return 0===arguments.length?n:(n=t,this)},a.accept=function(e,a){if(arguments.length>1)return void 0===t[a]?!1:t[a].accept(e,l);for(var r in t)if(void 0===e[r]){if(t[r].required)return!1}else{var n=t[r].accept(e[r],l);if(!n)return!1}return!0},a.assign=function(e){for(var a in t)t[a].variable(e[a]);return this},a.schema=function(t){return 0===arguments.length?l:(l=t,this)},a.data=function(t,e){return 0===arguments.length?i:(i=t,arguments.length>1&&a.schema(e),this)},a.dispatch=function(){return e},a}function s(){var t={x:a(!0),y:a(!1),object:e(),size:n(),colour:e(),column:i(),row:i()};t.x.required=!0,t.y.required=!0,t.object.required=!0;var r=d3.dispatch("mouseover","mouseout","click"),s=d3.select("body").append("svg").attr("class","bubblegraph dummy").style("visibility","invisible"),c=d(s),u=o(t,r,function(e){function a(e){return t.colour.variable()?e[t.colour.variable()]:1}function n(e){return t.column.variable()?e[t.column.variable()]:1}function i(e){return t.row.variable()?e[t.row.variable()]:1}t.colour.domain(u.data(),u.schema()),t.object.domain(u.data(),u.schema()),t.size.domain(u.data(),u.schema()),t.column.domain(u.data(),u.schema()),t.row.domain(u.data(),u.schema());for(var o,s,d=t.column.variable()?t.column.ticks().length:1,h=t.row.variable()?t.row.ticks().length:1,g=l(t.x.variable(),schema),p=g.title,v=c.height(p)+b("label_padding"),f=l(t.y.variable(),schema),m=f.title,y=0;2>y;++y)o=u.width()-b("padding")[1]-b("padding")[3]-t.y.width()-v,o=(o-(d-1)*b("sep"))/d,t.x.width(o).domain(u.data(),u.schema()),s=u.height()-b("padding")[0]-b("padding")[2]-t.x.height()-v,s=(s-(h-1)*b("sep"))/h,t.y.height(s).domain(u.data(),u.schema());var x=t.y.width()+b("padding")[1]+v,w=b("padding")[2];e=e.append("g").attr("class","graph graph-bubble");var A=w+.5*(u.height()-b("padding")[0]-b("padding")[2]-t.x.height()-v),_=x+.5*(u.width()-b("padding")[1]-b("padding")[3]-t.y.width()-v);e.append("text").attr("class","label label-y").attr("x",b("padding")[1]).attr("y",A).attr("text-anchor","middle").text(m).attr("transform","rotate(90 "+b("padding")[1]+" "+A+")"),e.append("text").attr("class","label label-x").attr("x",_).attr("y",u.height()-b("padding")[0]).attr("text-anchor","middle").text(p);var M=d3.nest().key(n).key(i).key(a).entries(u.data());for(y=0;y<M.length;++y){var j=M[y].values;w=b("padding")[2];for(var q=0;q<j.length;++q){q==j.length-1&&e.append("g").attr("class","xaxis").attr("transform","translate("+x+","+(w+s)+")").call(t.x),0===y&&e.append("g").attr("class","xaxis").attr("transform","translate("+(x-t.y.width())+","+w+")").call(t.y);var z=e.append("g").attr("class","panel").attr("transform","translate("+x+","+w+")");z.append("rect").attr("class","background").attr("width",o).attr("height",s);var N=t.x.ticks();z.selectAll("line.gridx").data(N).enter().append("line").attr("class","grid gridx").attr("x1",t.x.scale).attr("x2",t.x.scale).attr("y1",0).attr("y2",s);var B=t.y.ticks();z.selectAll("line.gridy").data(B).enter().append("line").attr("class","grid gridy").attr("x1",0).attr("x2",o).attr("y1",t.y.scale).attr("y2",t.y.scale);var O=z.append("g").classed("crosshairs",!0);O.append("line").classed("hline",!0).attr("x1",0).attr("y1",0).attr("x2",t.x.width()).attr("y2",0).style("visibility","hidden"),O.append("line").classed("vline",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",t.y.height()).style("visibility","hidden");var S=j[q].values;for(k=0;k<S.length;++k){z.selectAll("circle.bubble"+k).data(S[k].values).enter().append("circle").attr("class","bubble bubble"+k+" "+t.colour.scale(S[k].key)).attr("cx",t.x.scale).attr("cy",t.y.scale).attr("r",t.size.scale)}w+=t.y.height()+b("sep")}x+=t.x.width()+b("sep")}e.selectAll(".colour").on("mouseover",function(a){var n=t.colour.variable(),i=n?a.key||a[n]:void 0;r.mouseover.call(e,n,i,a)}).on("mouseout",function(a){var n=t.colour.variable(),i=n?a.key||a[n]:void 0;r.mouseout.call(e,n,i,a)}).on("click",function(a){var n=t.colour.variable(),i=n?a.key||a[n]:void 0;r.click.call(e,n,i,a)})});return r.on("mouseover",function(e,a,r){if(e){var n=t.colour.scale(""+a),i=/\bcolour([0-9]+)\b/,l=i.exec(n)[0];this.selectAll(".colour").classed("colourlow",!0),this.selectAll("."+l).classed({colourhigh:!0,colourlow:!1})}this.selectAll(".hline").attr("y1",t.y.scale(r)).attr("y2",t.y.scale(r)).style("visibility","visible"),this.selectAll(".vline").attr("x1",t.x.scale(r)).attr("x2",t.x.scale(r)).style("visibility","visible")}),r.on("mouseout",function(){this.selectAll(".colour").classed({colourhigh:!1,colourlow:!1}),this.selectAll(".hline").style("visibility","hidden"),this.selectAll(".vline").style("visibility","hidden")}),u}function c(){var t={x:a(!0),y:a(!1),colour:e(),column:i(),row:i()};t.x.required=!0,t.y.required=!0;var r=d3.dispatch("mouseover","mouseout","pointover","pointout","click"),n=d3.select("body").append("svg").attr("class","lineargraph dummy").style("visibility","invisible"),s=d(n),c=o(t,r,function(e){function a(e){return t.colour.variable()?e[t.colour.variable()]:1}function n(e){return t.column.variable()?e[t.column.variable()]:1}function i(e){return t.row.variable()?e[t.row.variable()]:1}t.colour.domain(c.data(),c.schema()),t.column.domain(c.data(),c.schema()),t.row.domain(c.data(),c.schema());for(var o,u,d=t.column.variable()?t.column.ticks().length:1,h=t.row.variable()?t.row.ticks().length:1,g=l(t.x.variable(),schema),p=g.title,v=s.height(p)+b("label_padding"),f=l(t.y.variable(),schema),m=f.title,y=0;2>y;++y)o=c.width()-b("padding")[1]-b("padding")[3]-t.y.width()-v,o=(o-(d-1)*b("sep"))/d,t.x.width(o).domain(c.data(),c.schema()),u=c.height()-b("padding")[0]-b("padding")[2]-t.x.height()-v,u=(u-(h-1)*b("sep"))/h,t.y.height(u).domain(c.data(),c.schema());var x=t.y.width()+b("padding")[1]+v,k=b("padding")[2];e=e.append("g").attr("class","graph graph-line");var w=k+.5*(c.height()-b("padding")[0]-b("padding")[2]-t.x.height()-v),A=x+.5*(c.width()-b("padding")[1]-b("padding")[3]-t.y.width()-v);e.append("text").attr("class","label label-y").attr("x",b("padding")[1]).attr("y",w).attr("text-anchor","middle").text(m).attr("transform","rotate(90 "+b("padding")[1]+" "+w+")"),e.append("text").attr("class","label label-y").attr("x",A).attr("y",c.height()-b("padding")[0]).attr("text-anchor","middle").text(p);var _=d3.nest().key(n).key(i).key(a).entries(c.data());for(y=0;y<_.length;++y){var M=_[y].values;k=b("padding")[2];for(var j=0;j<M.length;++j){j==M.length-1&&e.append("g").attr("class","axis axis-x").attr("transform","translate("+x+","+(k+u)+")").call(t.x),0===y&&e.append("g").attr("class","axis axis-y").attr("transform","translate("+(x-t.y.width())+","+k+")").call(t.y);var q=e.append("g").attr("class","panel").attr("transform","translate("+x+","+k+")");q.append("rect").attr("class","background").attr("width",o).attr("height",u);var z=t.x.ticks();q.selectAll("line.gridx").data(z).enter().append("line").attr("class","grid gridx").attr("x1",t.x.scale).attr("x2",t.x.scale).attr("y1",0).attr("y2",u);var N=t.y.ticks();q.selectAll("line.gridy").data(N).enter().append("line").attr("class","grid gridy").attr("x1",0).attr("x2",o).attr("y1",t.y.scale).attr("y2",t.y.scale);var B=q.append("g").classed("crosshairs",!0);B.append("line").classed("hline",!0).attr("x1",0).attr("y1",0).attr("x2",t.x.width()).attr("y2",0).style("visibility","hidden"),B.append("line").classed("vline",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",t.y.height()).style("visibility","hidden");for(var O=d3.svg.line().x(t.x.scale).y(t.y.scale),S=M[j].values,$=0;$<S.length;++$)q.append("path").attr("d",O(S[$].values)).attr("class",t.colour.scale(S[$].key)).datum(S[$]);for(S=M[j].values,$=0;$<S.length;++$){q.selectAll("circle.circle"+$).data(S[$].values).enter().append("circle").attr("class","circle"+$+" "+t.colour.scale(S[$].key)).attr("cx",t.x.scale).attr("cy",t.y.scale).attr("r",b("point_size"))}k+=t.y.height()+b("sep")}x+=t.x.width()+b("sep")}e.selectAll(".colour").on("mouseover",function(a){var n=t.colour.variable(),i=n?a.key||a[n]:void 0;r.mouseover.call(e,n,i,a),a.key||r.pointover.call(e,n,i,a)}).on("mouseout",function(a){var n=t.colour.variable(),i=n?a.key||a[n]:void 0;r.mouseout.call(e,n,i,a),a.key||r.pointout.call(e,n,i,a)}).on("click",function(a){var n=t.colour.variable(),i=n?a.key||a[n]:void 0;r.click.call(e,n,i,a)})});return r.on("mouseover",function(e,a){if(e){var r=t.colour.scale(""+a),n=/\bcolour([0-9]+)\b/,i=n.exec(r)[0];this.selectAll(".colour").classed("colourlow",!0),this.selectAll("."+i).classed({colourhigh:!0,colourlow:!1})}}),r.on("mouseout",function(){this.selectAll(".colour").classed({colourhigh:!1,colourlow:!1})}),r.on("pointover",function(e,a,r){this.selectAll(".hline").attr("y1",t.y.scale(r)).attr("y2",t.y.scale(r)).style("visibility","visible"),this.selectAll(".vline").attr("x1",t.x.scale(r)).attr("x2",t.x.scale(r)).style("visibility","visible")}),r.on("pointout",function(){this.selectAll(".hline").style("visibility","hidden"),this.selectAll(".vline").style("visibility","hidden")}),c}function u(){var e={region:r(),colour:t(),column:i(),row:i()};e.region.required=!0,e.colour.required=!0;var a=d3.dispatch("ready","mouseover","mouseout","click"),n=o(e,a,function(t){function r(t){return e.column.variable()?t[e.column.variable()]:1}function i(t){return e.row.variable()?t[e.row.variable()]:1}e.region.domain(n.data(),n.schema()),e.colour.domain(n.data(),n.schema()),e.column.domain(n.data(),n.schema()),e.row.domain(n.data(),n.schema());{var l=e.column.variable()?e.column.ticks().length:1,o=e.row.variable()?e.row.ticks().length:1,s=(n.width()-b("padding","map")[1]-b("padding","map")[3]-(l-1)*b("sep","map"))/l,c=(n.height()-b("padding","map")[0]-b("padding","map")[2]-(o-1)*b("sep","map"))/o,u=b("padding","map")[1];b("padding","map")[2]}e.region.width(s).height(c),t=t.append("g").attr("class","graph graph-map"),m(e.region.map_loaded,function(){for(var l=d3.nest().key(r).key(i).entries(n.data()),o=0;o<l.length;++o){for(var d=l[o].values,h=b("padding","map")[2],g=0;g<d.length;++g){var p=t.append("g").attr("class","map").attr("transform","translate("+u+","+h+")");p.append("rect").attr("class","background").attr("width",s).attr("height",c),p.selectAll("path").data(d[g].values).enter().append("path").attr("d",e.region.scale).attr("class",e.colour.scale),h+=c+b("sep","map")}u+=s+b("sep","map")}t.selectAll("path").on("mouseover",function(r){var n=r[e.region.variable()];a.mouseover.call(t,e.region.variable(),n,r)}).on("mouseout",function(r){var n=r[e.region.variable()];a.mouseout.call(t,e.region.variable(),n,r)}).on("click",function(r){var n=r[e.region.variable()];a.click.call(t,e.region.variable(),n,r)}),a.ready.call(t)})});if(a.on("mouseover.graph",function(t,e){this.selectAll("path").classed("colourlow",!0),this.selectAll("path").filter(function(a){return a[t]==e}).classed({colourhigh:!0,colourlow:!1})}),a.on("mouseout.graph",function(){this.selectAll("path").classed({colourhigh:!1,colourlow:!1})}),void 0!==d3.tip){var l=d3.tip().attr("class","d3-tip").html(function(t,e){return"<b>"+e+"</b>"});a.on("ready.tip",function(){this.call(l)}),a.on("mouseover.tip",function(t,e,a){l.show(t,e,a)}),a.on("mouseout.tip",function(t,e,a){l.hide(t,e,a)})}return n}function d(t){function e(t){if(r[t])return r[t];if(!a)return[void 0,void 0];var e=a.append("text").text(t),n=e[0][0].getBBox(),i=[1.2*n.width,.65*n.height];return e.remove(),r[t]=i,i}var a=t,r={};return e.svg=function(t){return 0===arguments.length?a:(a=t,this)},e.width=function(t){var a=e(t);return a[0]},e.height=function(t){var a=e(t);return a[1]},e}function h(){function t(t){if(void 0===e)return a+" "+a+"n1 "+a+1;var n=e[1]-e[0],i=Math.sqrt(.9999*(t-e[0]))/Math.sqrt(n),l=Math.floor(i*r);return a+" "+a+"n"+r+" "+a+(l+1)}var e,a="chloro",r=9;return t.domain=function(t){return 0===arguments.length?e:(e=t,this)},t.range=function(t){return 0===arguments.length?a:(a=t,this)},t.ticks=function(){for(var t=(e[1]-e[0])/r,a=e[0],n=[],i=0;r>=i;++i)n.push(a),a+=t;return n},t}function g(){function t(t){if(void 0===e)return r+" "+r+"n1 "+r+1;var n=e.indexOf(t);return r+" "+r+"n"+a+" "+r+(n+1)}var e,a,r="colour";return t.domain=function(t){return 0===arguments.length?e:(e=t,a=t.length,this)},t.range=function(t){return 0===arguments.length?r:(r=t,this)},t.ticks=function(){return e},t}function p(){function t(t){return r(t)}function e(t){var e="function"==typeof n?n(t):n;return e+=i}var a,r=d3.scale.linear(),n=20,i=5,l=10,o=!0;return t.domain=function(t){return t=r.domain(t),0===arguments.length?t:this},t.range=function(t){return t=r.range(t),0===arguments.length?t:this},t.label_size=function(t){return 0===arguments.length?n:(n=t,this)},t.nticks=function(t){return 0===arguments.length?l:(l=t,this)},t.inside=function(t){return 0===arguments.length?o:(o=t?!0:!1,this)},t.nice=function(){var t=r.range(),n=r.domain(),i=Math.abs(t[1]-t[0]),s=f(n[0],n[1],l,e,i);if(o){var c=e(s.labels[0]),u=e(s.labels[s.labels.length-1]),d=c/2+u/2;s=f(n[0],n[1],l,e,i-d),r.range(t[0]<t[1]?[t[0]+c/2,t[1]-u/2]:[t[0]-c/2,t[1]+u/2])}return domain=[s.lmin,s.lmax],r.domain([s.lmin,s.lmax]),a=s.labels,this},t.ticks=function(){return void 0===a?r.ticks(l):a},t}function v(){function t(t){if(void 0===a)return b("default_bubble");var r=void 0===e?b("max_bubble"):e;return r*Math.sqrt(t)/Math.sqrt(a[1])}var e,a;return t.domain=function(t){return 0===arguments.length?a:(a=d3.extent(t),this)},t.range=function(t){return 0===arguments.length?void 0===e?b("max_bubble"):e:(e=d3.max(t),this)},t.ticks=function(){return void 0},t}function f(t,e,a,r,n,i,l,o,s,c){function u(t,e,a,r,n,i){for(var l=a*n/(e-t),o=t;1e-10>=o-e;o+=a){var s=r(o,i);if(s>l)return!0}return!1}function d(t,e,a,i,l,o){l=l||[10,1,5,2,2.5,3,4,1.5,7,6,8,9],s=s||[1,0,0,0,-1,0,0,-1,0,0,0,0],o=o||.8,i=i||a;for(var c,d=a-1,h=(e-t)/d,g=Math.floor(Math.log(h)/Math.LN10),p=Math.pow(10,g),v=1-Math.abs(a-i)/i,f=0;f<l.length;f++){var m=l[f]*p,b=Math.floor(t/m)*m,y=b+d*m,x=g+s[f]<0?Math.abs(g+s[f]):0;if(t>=b&&y>=e){var k=1-(f-(0>=b&&y>=0))/l.length,w=(e-t)/(y-b);if(w>o&&!u(b,y,m,r,n,x)){var A=v+k+w;(void 0===c||A>c.score)&&(c={lmin:b,lmax:y,lstep:m,score:A,ndec:x})}}}return c}t=Number(t),e=Number(e),Math.abs(t-e)<1e-10&&(t=.96*t,e=1.04*e),r=r||function(){return 0},n=n||1,o=o||[10,1,5,2,2.5,3,4,1.5,7,6,8,9],s=s||[1,0,0,0,-1,0,0,-1,0,0,0,0],c=c||.8,i=i||2,l=l||Math.ceil(6*a);var h={lmin:t,lmax:e,lstep:e-t,score:-1e8,ndec:0},g=String(h.lstep).split(".");h.ndec=g.length>1?g[1].length:0;for(var p=i;l>=p;p++){var v=d(t,e,p,a,o,c);void 0!==v&&(void 0===h||v.score>h.score)&&(h=v)}for(var f=[],m=h.lmin;m-h.lmax<=1e-10;m+=h.lstep)f.push(m);return h.labels=f,h}grph={},void 0===grph.axis&&(grph.axis={}),grph.axis.chloropleth=t(),void 0===grph.axis&&(grph.axis={}),grph.axis.colour=e(),void 0===grph.axis&&(grph.axis={}),grph.axis.linear=a();var m=function(t,e){t()?e():setTimeout(function(){m(t,e)},100)};void 0===grph.axis&&(grph.axis={}),grph.axis.linear=a(),void 0===grph.axis&&(grph.axis={}),grph.axis.size=n(),void 0===grph.scale&&(grph.scale={}),grph.scale.chloropleth=h(),void 0===grph.scale&&(grph.scale={}),grph.scale.colour=g(),void 0===grph.scale&&(grph.scale={}),grph.scale.linear=p(),void 0===grph.scale&&(grph.scale={}),grph.scale.size=v();var b=function(){function t(t,a){return 0===arguments.length?b:2===arguments.length&&void 0!==e[a]&&void 0!==e[a][t]?e[a][t]:e.default[t]}var e={"default":{padding:[2,2,2,2],label_padding:4,sep:8,point_size:4,max_bubble:20,default_bubble:5}};return t.set=function(t,a,r){if(2===arguments.length)return e.default[t]=a,this;if(3===arguments.length)return void 0===e[a]&&(e[a]={}),e[a][t]=r,this;throw new Error("Need at leat two arguments.")},t}();grph.settings=b,format_numeric=function(t,e,a,r,n){if(isNaN(t))return"";if(void 0===e&&(e=""),void 0===r&&(r=","),void 0===n&&(n=" "),t=void 0!==a?t.toFixed(a):t.toString(),x=t.split("."),x1=x[0],x2=x.length>1?r+x[1]:"",""!==n)for(var i=/(\d+)(\d{3})/;i.test(x1);)x1=x1.replace(i,"$1"+n+"$2");return x1+x2+e},grph.line=c,grph.map=u,grph.bubble=s,this.grph=grph}();