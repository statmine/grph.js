(function(t){function e(t,e,n){switch(arguments.length){case 2:return null!=t?t:e;case 3:return null!=t?t:null!=e?e:n;default:throw new Error("Implement me")}}function n(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function r(t,e){function n(){he.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}var r=!0;return l(function(){return r&&(n(),r=!1),e.apply(this,arguments)},e)}function a(t,e){return function(n){return h(t.call(this,n),e)}}function i(t,e){return function(n){return this.lang().ordinal(t.call(this,n),e)}}function o(){}function s(t){M(t),l(this,t)}function u(t){var e=v(t),n=e.year||0,r=e.quarter||0,a=e.month||0,i=e.week||0,o=e.day||0,s=e.hour||0,u=e.minute||0,l=e.second||0,c=e.millisecond||0;this._milliseconds=+c+1e3*l+6e4*u+36e5*s,this._days=+o+7*i,this._months=+a+3*r+12*n,this._data={},this._bubble()}function l(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return e.hasOwnProperty("toString")&&(t.toString=e.toString),e.hasOwnProperty("valueOf")&&(t.valueOf=e.valueOf),t}function c(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&Ye.hasOwnProperty(e)&&(n[e]=t[e]);return n}function d(t){return 0>t?Math.ceil(t):Math.floor(t)}function h(t,e,n){for(var r=""+Math.abs(t),a=t>=0;r.length<e;)r="0"+r;return(a?n?"+":"":"-")+r}function f(t,e,n,r){var a=e._milliseconds,i=e._days,o=e._months;r=null==r?!0:r,a&&t._d.setTime(+t._d+a*n),i&&se(t,"Date",oe(t,"Date")+i*n),o&&ie(t,oe(t,"Month")+o*n),r&&he.updateOffset(t,i||o)}function m(t){return"[object Array]"===Object.prototype.toString.call(t)}function p(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function g(t,e,n){var r,a=Math.min(t.length,e.length),i=Math.abs(t.length-e.length),o=0;for(r=0;a>r;r++)(n&&t[r]!==e[r]||!n&&b(t[r])!==b(e[r]))&&o++;return o+i}function y(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=en[t]||nn[e]||e}return t}function v(t){var e,n,r={};for(n in t)t.hasOwnProperty(n)&&(e=y(n),e&&(r[e]=t[n]));return r}function _(e){var n,r;if(0===e.indexOf("week"))n=7,r="day";else{if(0!==e.indexOf("month"))return;n=12,r="month"}he[e]=function(a,i){var o,s,u=he.fn._lang[e],l=[];if("number"==typeof a&&(i=a,a=t),s=function(t){var e=he().utc().set(r,t);return u.call(he.fn._lang,e,a||"")},null!=i)return s(i);for(o=0;n>o;o++)l.push(s(o));return l}}function b(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=e>=0?Math.floor(e):Math.ceil(e)),n}function w(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function k(t,e,n){return ee(he([t,11,31+e-n]),e,n).week}function x(t){return D(t)?366:365}function D(t){return t%4===0&&t%100!==0||t%400===0}function M(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[_e]<0||t._a[_e]>11?_e:t._a[be]<1||t._a[be]>w(t._a[ve],t._a[_e])?be:t._a[we]<0||t._a[we]>23?we:t._a[ke]<0||t._a[ke]>59?ke:t._a[xe]<0||t._a[xe]>59?xe:t._a[De]<0||t._a[De]>999?De:-1,t._pf._overflowDayOfYear&&(ve>e||e>be)&&(e=be),t._pf.overflow=e)}function Y(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length)),t._isValid}function S(t){return t?t.toLowerCase().replace("_","-"):t}function O(t,e){return e._isUTC?he(t).zone(e._offset||0):he(t).local()}function F(t,e){return e.abbr=t,Me[t]||(Me[t]=new o),Me[t].set(e),Me[t]}function T(t){delete Me[t]}function A(t){var e,n,r,a,i=0,o=function(t){if(!Me[t]&&Se)try{require("./lang/"+t)}catch(e){}return Me[t]};if(!t)return he.fn._lang;if(!m(t)){if(n=o(t))return n;t=[t]}for(;i<t.length;){for(a=S(t[i]).split("-"),e=a.length,r=S(t[i+1]),r=r?r.split("-"):null;e>0;){if(n=o(a.slice(0,e).join("-")))return n;if(r&&r.length>=e&&g(a,r,!0)>=e-1)break;e--}i++}return he.fn._lang}function P(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function W(t){var e,n,r=t.match(Ae);for(e=0,n=r.length;n>e;e++)r[e]=un[r[e]]?un[r[e]]:P(r[e]);return function(a){var i="";for(e=0;n>e;e++)i+=r[e]instanceof Function?r[e].call(a,t):r[e];return i}}function z(t,e){return t.isValid()?(e=G(e,t.lang()),rn[e]||(rn[e]=W(e)),rn[e](t)):t.lang().invalidDate()}function G(t,e){function n(t){return e.longDateFormat(t)||t}var r=5;for(Pe.lastIndex=0;r>=0&&Pe.test(t);)t=t.replace(Pe,n),Pe.lastIndex=0,r-=1;return t}function C(t,e){var n,r=e._strict;switch(t){case"Q":return je;case"DDDD":return Ze;case"YYYY":case"GGGG":case"gggg":return r?$e:Ge;case"Y":case"G":case"g":return Be;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return r?Ve:Ce;case"S":if(r)return je;case"SS":if(r)return Ne;case"SSS":if(r)return Ze;case"DDD":return ze;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ie;case"a":case"A":return A(e._l)._meridiemParse;case"X":return Ee;case"Z":case"ZZ":return Ue;case"T":return Le;case"SSSS":return He;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return r?Ne:We;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return We;case"Do":return qe;default:return n=new RegExp(Z(N(t.replace("\\","")),"i"))}}function H(t){t=t||"";var e=t.match(Ue)||[],n=e[e.length-1]||[],r=(n+"").match(Ke)||["-",0,0],a=+(60*r[1])+b(r[2]);return"+"===r[0]?-a:a}function I(t,e,n){var r,a=n._a;switch(t){case"Q":null!=e&&(a[_e]=3*(b(e)-1));break;case"M":case"MM":null!=e&&(a[_e]=b(e)-1);break;case"MMM":case"MMMM":r=A(n._l).monthsParse(e),null!=r?a[_e]=r:n._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(a[be]=b(e));break;case"Do":null!=e&&(a[be]=b(parseInt(e,10)));break;case"DDD":case"DDDD":null!=e&&(n._dayOfYear=b(e));break;case"YY":a[ve]=he.parseTwoDigitYear(e);break;case"YYYY":case"YYYYY":case"YYYYYY":a[ve]=b(e);break;case"a":case"A":n._isPm=A(n._l).isPM(e);break;case"H":case"HH":case"h":case"hh":a[we]=b(e);break;case"m":case"mm":a[ke]=b(e);break;case"s":case"ss":a[xe]=b(e);break;case"S":case"SS":case"SSS":case"SSSS":a[De]=b(1e3*("0."+e));break;case"X":n._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=H(e);break;case"dd":case"ddd":case"dddd":r=A(n._l).weekdaysParse(e),null!=r?(n._w=n._w||{},n._w.d=r):n._pf.invalidWeekday=e;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":t=t.substr(0,1);case"gggg":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(n._w=n._w||{},n._w[t]=b(e));break;case"gg":case"GG":n._w=n._w||{},n._w[t]=he.parseTwoDigitYear(e)}}function U(t){var n,r,a,i,o,s,u,l;n=t._w,null!=n.GG||null!=n.W||null!=n.E?(o=1,s=4,r=e(n.GG,t._a[ve],ee(he(),1,4).year),a=e(n.W,1),i=e(n.E,1)):(l=A(t._l),o=l._week.dow,s=l._week.doy,r=e(n.gg,t._a[ve],ee(he(),o,s).year),a=e(n.w,1),null!=n.d?(i=n.d,o>i&&++a):i=null!=n.e?n.e+o:o),u=ne(r,a,i,s,o),t._a[ve]=u.year,t._dayOfYear=u.dayOfYear}function L(t){var n,r,a,i,o=[];if(!t._d){for(a=q(t),t._w&&null==t._a[be]&&null==t._a[_e]&&U(t),t._dayOfYear&&(i=e(t._a[ve],a[ve]),t._dayOfYear>x(i)&&(t._pf._overflowDayOfYear=!0),r=X(i,0,t._dayOfYear),t._a[_e]=r.getUTCMonth(),t._a[be]=r.getUTCDate()),n=0;3>n&&null==t._a[n];++n)t._a[n]=o[n]=a[n];for(;7>n;n++)t._a[n]=o[n]=null==t._a[n]?2===n?1:0:t._a[n];t._d=(t._useUTC?X:J).apply(null,o),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()+t._tzm)}}function E(t){var e;t._d||(e=v(t._i),t._a=[e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond],L(t))}function q(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function j(t){if(t._f===he.ISO_8601)return void V(t);t._a=[],t._pf.empty=!0;var e,n,r,a,i,o=A(t._l),s=""+t._i,u=s.length,l=0;for(r=G(t._f,o).match(Ae)||[],e=0;e<r.length;e++)a=r[e],n=(s.match(C(a,t))||[])[0],n&&(i=s.substr(0,s.indexOf(n)),i.length>0&&t._pf.unusedInput.push(i),s=s.slice(s.indexOf(n)+n.length),l+=n.length),un[a]?(n?t._pf.empty=!1:t._pf.unusedTokens.push(a),I(a,n,t)):t._strict&&!n&&t._pf.unusedTokens.push(a);t._pf.charsLeftOver=u-l,s.length>0&&t._pf.unusedInput.push(s),t._isPm&&t._a[we]<12&&(t._a[we]+=12),t._isPm===!1&&12===t._a[we]&&(t._a[we]=0),L(t),M(t)}function N(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,r,a){return e||n||r||a})}function Z(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function $(t){var e,r,a,i,o;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(0/0));for(i=0;i<t._f.length;i++)o=0,e=l({},t),e._pf=n(),e._f=t._f[i],j(e),Y(e)&&(o+=e._pf.charsLeftOver,o+=10*e._pf.unusedTokens.length,e._pf.score=o,(null==a||a>o)&&(a=o,r=e));l(t,r||e)}function V(t){var e,n,r=t._i,a=Qe.exec(r);if(a){for(t._pf.iso=!0,e=0,n=Xe.length;n>e;e++)if(Xe[e][1].exec(r)){t._f=Xe[e][0]+(a[6]||" ");break}for(e=0,n=Re.length;n>e;e++)if(Re[e][1].exec(r)){t._f+=Re[e][0];break}r.match(Ue)&&(t._f+="Z"),j(t)}else t._isValid=!1}function B(t){V(t),t._isValid===!1&&(delete t._isValid,he.createFromInputFallback(t))}function Q(e){var n=e._i,r=Oe.exec(n);n===t?e._d=new Date:r?e._d=new Date(+r[1]):"string"==typeof n?B(e):m(n)?(e._a=n.slice(0),L(e)):p(n)?e._d=new Date(+n):"object"==typeof n?E(e):"number"==typeof n?e._d=new Date(n):he.createFromInputFallback(e)}function J(t,e,n,r,a,i,o){var s=new Date(t,e,n,r,a,i,o);return 1970>t&&s.setFullYear(t),s}function X(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function R(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function K(t,e,n,r,a){return a.relativeTime(e||1,!!n,t,r)}function te(t,e,n){var r=ye(Math.abs(t)/1e3),a=ye(r/60),i=ye(a/60),o=ye(i/24),s=ye(o/365),u=r<an.s&&["s",r]||1===a&&["m"]||a<an.m&&["mm",a]||1===i&&["h"]||i<an.h&&["hh",i]||1===o&&["d"]||o<=an.dd&&["dd",o]||o<=an.dm&&["M"]||o<an.dy&&["MM",ye(o/30)]||1===s&&["y"]||["yy",s];return u[2]=e,u[3]=t>0,u[4]=n,K.apply({},u)}function ee(t,e,n){var r,a=n-e,i=n-t.day();return i>a&&(i-=7),a-7>i&&(i+=7),r=he(t).add("d",i),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function ne(t,e,n,r,a){var i,o,s=X(t,0,1).getUTCDay();return s=0===s?7:s,n=null!=n?n:a,i=a-s+(s>r?7:0)-(a>s?7:0),o=7*(e-1)+(n-a)+i+1,{year:o>0?t:t-1,dayOfYear:o>0?o:x(t-1)+o}}function re(e){var n=e._i,r=e._f;return null===n||r===t&&""===n?he.invalid({nullInput:!0}):("string"==typeof n&&(e._i=n=A().preparse(n)),he.isMoment(n)?(e=c(n),e._d=new Date(+n._d)):r?m(r)?$(e):j(e):Q(e),new s(e))}function ae(t,e){var n,r;if(1===e.length&&m(e[0])&&(e=e[0]),!e.length)return he();for(n=e[0],r=1;r<e.length;++r)e[r][t](n)&&(n=e[r]);return n}function ie(t,e){var n;return"string"==typeof e&&(e=t.lang().monthsParse(e),"number"!=typeof e)?t:(n=Math.min(t.date(),w(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t)}function oe(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function se(t,e,n){return"Month"===e?ie(t,n):t._d["set"+(t._isUTC?"UTC":"")+e](n)}function ue(t,e){return function(n){return null!=n?(se(this,t,n),he.updateOffset(this,e),this):oe(this,t)}}function le(t){he.duration.fn[t]=function(){return this._data[t]}}function ce(t,e){he.duration.fn["as"+t]=function(){return+this/e}}function de(t){"undefined"==typeof ender&&(fe=ge.moment,ge.moment=t?r("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",he):he)}for(var he,fe,me,pe="2.7.0",ge="undefined"!=typeof global?global:this,ye=Math.round,ve=0,_e=1,be=2,we=3,ke=4,xe=5,De=6,Me={},Ye={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_tzm:null,_isUTC:null,_offset:null,_pf:null,_lang:null},Se="undefined"!=typeof module&&module.exports,Oe=/^\/?Date\((\-?\d+)/i,Fe=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Te=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Ae=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Pe=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,We=/\d\d?/,ze=/\d{1,3}/,Ge=/\d{1,4}/,Ce=/[+\-]?\d{1,6}/,He=/\d+/,Ie=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Ue=/Z|[\+\-]\d\d:?\d\d/gi,Le=/T/i,Ee=/[\+\-]?\d+(\.\d{1,3})?/,qe=/\d{1,2}/,je=/\d/,Ne=/\d\d/,Ze=/\d{3}/,$e=/\d{4}/,Ve=/[+-]?\d{6}/,Be=/[+-]?\d+/,Qe=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Je="YYYY-MM-DDTHH:mm:ssZ",Xe=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Re=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Ke=/([\+\-]|\d\d)/gi,tn=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),en={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},nn={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},rn={},an={s:45,m:45,h:22,dd:25,dm:45,dy:345},on="DDD w W M D d".split(" "),sn="M D H h m s w W".split(" "),un={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return h(this.year()%100,2)},YYYY:function(){return h(this.year(),4)},YYYYY:function(){return h(this.year(),5)},YYYYYY:function(){var t=this.year(),e=t>=0?"+":"-";return e+h(Math.abs(t),6)},gg:function(){return h(this.weekYear()%100,2)},gggg:function(){return h(this.weekYear(),4)},ggggg:function(){return h(this.weekYear(),5)},GG:function(){return h(this.isoWeekYear()%100,2)},GGGG:function(){return h(this.isoWeekYear(),4)},GGGGG:function(){return h(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return b(this.milliseconds()/100)},SS:function(){return h(b(this.milliseconds()/10),2)},SSS:function(){return h(this.milliseconds(),3)},SSSS:function(){return h(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+h(b(t/60),2)+":"+h(b(t)%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+h(b(t/60),2)+h(b(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},ln=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];on.length;)me=on.pop(),un[me+"o"]=i(un[me],me);for(;sn.length;)me=sn.pop(),un[me+me]=a(un[me],2);for(un.DDDD=a(un.DDD,3),l(o.prototype,{set:function(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,n,r;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(n=he.utc([2e3,e]),r="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[e]=new RegExp(r.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,n,r;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(n=he([2e3,1]).day(e),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var n=this._calendar[t];return"function"==typeof n?n.apply(e):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,n,r){var a=this._relativeTime[n];return"function"==typeof a?a(t,e,n,r):a.replace(/%d/i,t)},pastFuture:function(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return ee(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),he=function(e,r,a,i){var o;return"boolean"==typeof a&&(i=a,a=t),o={},o._isAMomentObject=!0,o._i=e,o._f=r,o._l=a,o._strict=i,o._isUTC=!1,o._pf=n(),re(o)},he.suppressDeprecationWarnings=!1,he.createFromInputFallback=r("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i)}),he.min=function(){var t=[].slice.call(arguments,0);return ae("isBefore",t)},he.max=function(){var t=[].slice.call(arguments,0);return ae("isAfter",t)},he.utc=function(e,r,a,i){var o;return"boolean"==typeof a&&(i=a,a=t),o={},o._isAMomentObject=!0,o._useUTC=!0,o._isUTC=!0,o._l=a,o._i=e,o._f=r,o._strict=i,o._pf=n(),re(o).utc()},he.unix=function(t){return he(1e3*t)},he.duration=function(t,e){var n,r,a,i=t,o=null;return he.isDuration(t)?i={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(i={},e?i[e]=t:i.milliseconds=t):(o=Fe.exec(t))?(n="-"===o[1]?-1:1,i={y:0,d:b(o[be])*n,h:b(o[we])*n,m:b(o[ke])*n,s:b(o[xe])*n,ms:b(o[De])*n}):(o=Te.exec(t))&&(n="-"===o[1]?-1:1,a=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*n},i={y:a(o[2]),M:a(o[3]),d:a(o[4]),h:a(o[5]),m:a(o[6]),s:a(o[7]),w:a(o[8])}),r=new u(i),he.isDuration(t)&&t.hasOwnProperty("_lang")&&(r._lang=t._lang),r},he.version=pe,he.defaultFormat=Je,he.ISO_8601=function(){},he.momentProperties=Ye,he.updateOffset=function(){},he.relativeTimeThreshold=function(e,n){return an[e]===t?!1:(an[e]=n,!0)},he.lang=function(t,e){var n;return t?(e?F(S(t),e):null===e?(T(t),t="en"):Me[t]||A(t),n=he.duration.fn._lang=he.fn._lang=A(t),n._abbr):he.fn._lang._abbr},he.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),A(t)},he.isMoment=function(t){return t instanceof s||null!=t&&t.hasOwnProperty("_isAMomentObject")},he.isDuration=function(t){return t instanceof u},me=ln.length-1;me>=0;--me)_(ln[me]);he.normalizeUnits=function(t){return y(t)},he.invalid=function(t){var e=he.utc(0/0);return null!=t?l(e._pf,t):e._pf.userInvalidated=!0,e},he.parseZone=function(){return he.apply(null,arguments).parseZone()},he.parseTwoDigitYear=function(t){return b(t)+(b(t)>68?1900:2e3)},l(he.fn=s.prototype,{clone:function(){return he(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var t=he(this).utc();return 0<t.year()&&t.year()<=9999?z(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):z(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return Y(this)},isDSTShifted:function(){return this._a?this.isValid()&&g(this._a,(this._isUTC?he.utc(this._a):he(this._a)).toArray())>0:!1},parsingFlags:function(){return l({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(t){var e=z(this,t||he.defaultFormat);return this.lang().postformat(e)},add:function(t,e){var n;return n="string"==typeof t&&"string"==typeof e?he.duration(isNaN(+e)?+t:+e,isNaN(+e)?e:t):"string"==typeof t?he.duration(+e,t):he.duration(t,e),f(this,n,1),this},subtract:function(t,e){var n;return n="string"==typeof t&&"string"==typeof e?he.duration(isNaN(+e)?+t:+e,isNaN(+e)?e:t):"string"==typeof t?he.duration(+e,t):he.duration(t,e),f(this,n,-1),this},diff:function(t,e,n){var r,a,i=O(t,this),o=6e4*(this.zone()-i.zone());return e=y(e),"year"===e||"month"===e?(r=432e5*(this.daysInMonth()+i.daysInMonth()),a=12*(this.year()-i.year())+(this.month()-i.month()),a+=(this-he(this).startOf("month")-(i-he(i).startOf("month")))/r,a-=6e4*(this.zone()-he(this).startOf("month").zone()-(i.zone()-he(i).startOf("month").zone()))/r,"year"===e&&(a/=12)):(r=this-i,a="second"===e?r/1e3:"minute"===e?r/6e4:"hour"===e?r/36e5:"day"===e?(r-o)/864e5:"week"===e?(r-o)/6048e5:r),n?a:d(a)},from:function(t,e){return he.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!e)},fromNow:function(t){return this.from(he(),t)},calendar:function(t){var e=t||he(),n=O(e,this).startOf("day"),r=this.diff(n,"days",!0),a=-6>r?"sameElse":-1>r?"lastWeek":0>r?"lastDay":1>r?"sameDay":2>r?"nextDay":7>r?"nextWeek":"sameElse";return this.format(this.lang().calendar(a,this))},isLeapYear:function(){return D(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=R(t,this.lang()),this.add({d:t-e})):e},month:ue("Month",!0),startOf:function(t){switch(t=y(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=y(t),this.startOf(t).add("isoWeek"===t?"week":t,1).subtract("ms",1)},isAfter:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)>+he(t).startOf(e)},isBefore:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)<+he(t).startOf(e)},isSame:function(t,e){return e=e||"ms",+this.clone().startOf(e)===+O(t,this).startOf(e)},min:r("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(t){return t=he.apply(null,arguments),this>t?this:t}),max:r("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(t){return t=he.apply(null,arguments),t>this?this:t}),zone:function(t,e){var n=this._offset||0;return null==t?this._isUTC?n:this._d.getTimezoneOffset():("string"==typeof t&&(t=H(t)),Math.abs(t)<16&&(t=60*t),this._offset=t,this._isUTC=!0,n!==t&&(!e||this._changeInProgress?f(this,he.duration(n-t,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,he.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?he(t).zone():0,(this.zone()-t)%60===0},daysInMonth:function(){return w(this.year(),this.month())},dayOfYear:function(t){var e=ye((he(this).startOf("day")-he(this).startOf("year"))/864e5)+1;return null==t?e:this.add("d",t-e)},quarter:function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},weekYear:function(t){var e=ee(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==t?e:this.add("y",t-e)},isoWeekYear:function(t){var e=ee(this,1,4).year;return null==t?e:this.add("y",t-e)},week:function(t){var e=this.lang().week(this);return null==t?e:this.add("d",7*(t-e))},isoWeek:function(t){var e=ee(this,1,4).week;return null==t?e:this.add("d",7*(t-e))},weekday:function(t){var e=(this.day()+7-this.lang()._week.dow)%7;return null==t?e:this.add("d",t-e)},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},isoWeeksInYear:function(){return k(this.year(),1,4)},weeksInYear:function(){var t=this._lang._week;return k(this.year(),t.dow,t.doy)},get:function(t){return t=y(t),this[t]()},set:function(t,e){return t=y(t),"function"==typeof this[t]&&this[t](e),this},lang:function(e){return e===t?this._lang:(this._lang=A(e),this)}}),he.fn.millisecond=he.fn.milliseconds=ue("Milliseconds",!1),he.fn.second=he.fn.seconds=ue("Seconds",!1),he.fn.minute=he.fn.minutes=ue("Minutes",!1),he.fn.hour=he.fn.hours=ue("Hours",!0),he.fn.date=ue("Date",!0),he.fn.dates=r("dates accessor is deprecated. Use date instead.",ue("Date",!0)),he.fn.year=ue("FullYear",!0),he.fn.years=r("years accessor is deprecated. Use year instead.",ue("FullYear",!0)),he.fn.days=he.fn.day,he.fn.months=he.fn.month,he.fn.weeks=he.fn.week,he.fn.isoWeeks=he.fn.isoWeek,he.fn.quarters=he.fn.quarter,he.fn.toJSON=he.fn.toISOString,l(he.duration.fn=u.prototype,{_bubble:function(){var t,e,n,r,a=this._milliseconds,i=this._days,o=this._months,s=this._data;s.milliseconds=a%1e3,t=d(a/1e3),s.seconds=t%60,e=d(t/60),s.minutes=e%60,n=d(e/60),s.hours=n%24,i+=d(n/24),s.days=i%30,o+=d(i/30),s.months=o%12,r=d(o/12),s.years=r},weeks:function(){return d(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*b(this._months/12)},humanize:function(t){var e=+this,n=te(e,!t,this.lang());return t&&(n=this.lang().pastFuture(e,n)),this.lang().postformat(n)},add:function(t,e){var n=he.duration(t,e);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(t,e){var n=he.duration(t,e);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(t){return t=y(t),this[t.toLowerCase()+"s"]()},as:function(t){return t=y(t),this["as"+t.charAt(0).toUpperCase()+t.slice(1)+"s"]()},lang:he.fn.lang,toIsoString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),n=Math.abs(this.days()),r=Math.abs(this.hours()),a=Math.abs(this.minutes()),i=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(n?n+"D":"")+(r||a||i?"T":"")+(r?r+"H":"")+(a?a+"M":"")+(i?i+"S":""):"P0D"}});for(me in tn)tn.hasOwnProperty(me)&&(ce(me,tn[me]),le(me.toLowerCase()));ce("Weeks",6048e5),he.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},he.lang("en",{ordinal:function(t){var e=t%10,n=1===b(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),Se?module.exports=he:"function"==typeof define&&define.amd?(define("moment",function(t,e,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(ge.moment=fe),he}),de(!0)):de()}).call(this),function(){var t,e,n,r=[].slice;e="undefined"!=typeof module&&null!==module&&null!=module.exports,t=function(t,e,n){var a;return a=!1,function(){var i;return i=1<=arguments.length?r.call(arguments,0):[],a||"undefined"!=typeof console&&null!==console&&null!=console.warn&&console.warn("#"+t+" is deprecated. Use #"+e+" instead."),a=!0,n.apply(this,i)}},n=function(n){var a,i,o;if(null==n)throw"Can't find moment";return o=!1,a=function(){function a(t,e,r,a){var i;null==a&&(a={}),"string"!=typeof r&&(a=null!=r?r:{},r=null),"boolean"==typeof a&&(a={allDay:a}),this.start=n(t,r,a.parseStrict),this.end=n(e,r,a.parseStrict),this.allDay=null!=(i=a.allDay)?i:!1}return a._extend=function(){var t,e,n,a,i,o;for(e=arguments[0],a=2<=arguments.length?r.call(arguments,1):[],i=0,o=a.length;o>i;i++){n=a[i];for(t in n)"undefined"!=typeof n[t]&&(e[t]=n[t])}return e},a.defaults={twentyFourHour:!1,allDaySimple:{fn:function(t){return function(){return t.allDay}},slot:0,pre:" "},dayOfWeek:{fn:function(t){return function(e){return e.format(t.weekdayFormat)}},slot:1,pre:" "},allDayMonth:{fn:function(t){return function(e){return e.format(""+t.monthFormat+" "+t.dayFormat)}},slot:2,pre:" "},month:{fn:function(t){return function(e){return e.format(t.monthFormat)}},slot:2,pre:" "},date:{fn:function(t){return function(e){return e.format(t.dayFormat)}},slot:3,pre:" "},year:{fn:function(t){return function(e){return e.format(t.yearFormat)}},slot:4,pre:", "},time:{fn:function(t){return function(e){var n;return n=e.format(0===e.minutes()&&t.implicitMinutes&&!t.twentyFourHour?t.hourFormat:""+t.hourFormat+":"+t.minuteFormat),t.groupMeridiems||t.twentyFourHour||(t.spaceBeforeMeridiem&&(n+=" "),n+=e.format(t.meridiemFormat)),n}},slot:5,pre:", "},meridiem:{fn:function(t){return function(e){return e.format(t.meridiemFormat)}},slot:6,pre:function(t){return t.spaceBeforeMeridiem?" ":""}}},a.registerLang=function(t,e){return n.lang(t,{twix:a._extend({},a.defaults,e)})},a.prototype.isSame=function(t){return this.start.isSame(this.end,t)},a.prototype.length=function(t){return this._trueEnd(!0).diff(this._trueStart(),t)},a.prototype.count=function(t){var e,n;return n=this.start.clone().startOf(t),e=this.end.clone().startOf(t),e.diff(n,t)+1},a.prototype.countInner=function(t){var e,n,r;return r=this._inner(t),n=r[0],e=r[1],n>=e?0:e.diff(n,t)},a.prototype.iterate=function(t,e,n){var r,a,i,o,s=this;return null==t&&(t=1),o=this._prepIterateInputs(t,e,n),t=o[0],e=o[1],n=o[2],i=this.start.clone().startOf(e),r=this.end.clone().startOf(e),a=function(){return r>=i&&(!n||i.valueOf()!==r.valueOf()||s.end.hours()>n||s.allDay)},this._iterateHelper(e,i,a,t)},a.prototype.iterateInner=function(t,e){var n,r,a,i,o;return null==t&&(t=1),i=this._prepIterateInputs(t,e),t=i[0],e=i[1],o=this._inner(e,t),a=o[0],n=o[1],r=function(){return n>a},this._iterateHelper(e,a,r,t)},a.prototype.humanizeLength=function(){return this.allDay?this.isSame("day")?"all day":this.start.from(this.end.clone().add(1,"day"),!0):this.start.from(this.end,!0)},a.prototype.asDuration=function(){var t;return t=this.end.diff(this.start),n.duration(t)},a.prototype.isPast=function(){return this.allDay?this.end.clone().endOf("day")<n():this.end<n()},a.prototype.isFuture=function(){return this.allDay?this.start.clone().startOf("day")>n():this.start>n()},a.prototype.isCurrent=function(){return!this.isPast()&&!this.isFuture()},a.prototype.contains=function(t){return t=n(t),this._trueStart()<=t&&this._trueEnd()>=t
},a.prototype.isEmpty=function(){return this._trueStart().valueOf()===this._trueEnd().valueOf()},a.prototype.overlaps=function(t){return this._trueEnd().isAfter(t._trueStart())&&this._trueStart().isBefore(t._trueEnd())},a.prototype.engulfs=function(t){return this._trueStart()<=t._trueStart()&&this._trueEnd()>=t._trueEnd()},a.prototype.union=function(t){var e,n,r;return e=this.allDay&&t.allDay,e?(r=this.start<t.start?this.start:t.start,n=this.end>t.end?this.end:t.end):(r=this._trueStart()<t._trueStart()?this._trueStart():t._trueStart(),n=this._trueEnd()>t._trueEnd()?this._trueEnd():t._trueEnd()),new a(r,n,e)},a.prototype.intersection=function(t){var e,r,i,o;return o=this.start>t.start?this.start:t.start,this.allDay?(r=n(this.end),r.add(1,"day"),r.subtract(1,"millisecond"),i=t.allDay?r<t.end?this.end:t.end:r<t.end?r:t.end):i=this.end<t.end?this.end:t.end,e=this.allDay&&t.allDay,new a(o,i,e)},a.prototype.isValid=function(){return this._trueStart()<=this._trueEnd()},a.prototype.equals=function(t){return t instanceof a&&this.allDay===t.allDay&&this.start.valueOf()===t.start.valueOf()&&this.end.valueOf()===t.end.valueOf()},a.prototype.toString=function(){var t;return"{start: "+this.start.format()+", end: "+this.end.format()+", allDay: "+(null!=(t=this.allDay)?t:{"true":"false"})+"}"},a.prototype.simpleFormat=function(t,e){var n,r;return n={allDay:"(all day)",template:a.formatTemplate},a._extend(n,e||{}),r=n.template(this.start.format(t),this.end.format(t)),this.allDay&&n.allDay&&(r+=" "+n.allDay),r},a.prototype.format=function(t){var e,r,i,o,s,u,l,c,d,h,f,m,p,g,y=this;if(this._lazyLang(),this.isEmpty())return"";for(d={groupMeridiems:!0,spaceBeforeMeridiem:!0,showDate:!0,showDayOfWeek:!1,twentyFourHour:this.langData.twentyFourHour,implicitMinutes:!0,implicitYear:!0,yearFormat:"YYYY",monthFormat:"MMM",weekdayFormat:"ddd",dayFormat:"D",meridiemFormat:"A",hourFormat:"h",minuteFormat:"mm",allDay:"all day",explicitAllDay:!1,lastNightEndsAt:0,template:a.formatTemplate},a._extend(d,t||{}),s=[],d.twentyFourHour&&(d.hourFormat=d.hourFormat.replace("h","H")),l=d.lastNightEndsAt>0&&!this.allDay&&this.end.clone().startOf("day").valueOf()===this.start.clone().add(1,"day").startOf("day").valueOf()&&this.start.hours()>12&&this.end.hours()<d.lastNightEndsAt,c=d.showDate||!this.isSame("day")&&!l,this.allDay&&this.isSame("day")&&(!d.showDate||d.explicitAllDay)&&s.push({name:"all day simple",fn:this._formatFn("allDaySimple",d),pre:this._formatPre("allDaySimple",d),slot:this._formatSlot("allDaySimple")}),!c||d.implicitYear&&this.start.year()===n().year()&&this.isSame("year")||s.push({name:"year",fn:this._formatFn("year",d),pre:this._formatPre("year",d),slot:this._formatSlot("year")}),!this.allDay&&c&&s.push({name:"all day month",fn:this._formatFn("allDayMonth",d),ignoreEnd:function(){return l},pre:this._formatPre("allDayMonth",d),slot:this._formatSlot("allDayMonth")}),this.allDay&&c&&s.push({name:"month",fn:this._formatFn("month",d),pre:this._formatPre("month",d),slot:this._formatSlot("month")}),this.allDay&&c&&s.push({name:"date",fn:this._formatFn("date",d),pre:this._formatPre("date",d),slot:this._formatSlot("date")}),c&&d.showDayOfWeek&&s.push({name:"day of week",fn:this._formatFn("dayOfWeek",d),pre:this._formatPre("dayOfWeek",d),slot:this._formatSlot("dayOfWeek")}),!d.groupMeridiems||d.twentyFourHour||this.allDay||s.push({name:"meridiem",fn:this._formatFn("meridiem",d),pre:this._formatPre("meridiem",d),slot:this._formatSlot("meridiem")}),this.allDay||s.push({name:"time",fn:this._formatFn("time",d),pre:this._formatPre("time",d),slot:this._formatSlot("time")}),f=[],r=[],e=[],m=!0,h=function(t){var n,a,o;return o=t.fn(y.start),n=t.ignoreEnd&&t.ignoreEnd()?o:t.fn(y.end),a={format:t,value:function(){return o}},n===o&&m?e.push(a):(m&&(m=!1,e.push({format:{slot:t.slot,pre:""},value:function(){return d.template(i(f),i(r,!0).trim())}})),f.push(a),r.push({format:t,value:function(){return n}}))},p=0,g=s.length;g>p;p++)o=s[p],h(o);return u=!0,(i=function(t,e){var n,r,a,i,o,s;for(n=!0,a="",s=t.sort(function(t,e){return t.format.slot-e.format.slot}),i=0,o=s.length;o>i;i++)r=s[i],u||(a+=n&&e?" ":r.format.pre),a+=r.value(),u=!1,n=!1;return a})(e)},a.prototype._trueStart=function(){return this.allDay?this.start.clone().startOf("day"):this.start.clone()},a.prototype._trueEnd=function(t){return null==t&&(t=!1),this.allDay?t?this.end.clone().add(1,"day"):this.end.clone().endOf("day"):this.end.clone()},a.prototype._iterateHelper=function(t,e,n,r){return null==r&&(r=1),{next:function(){var a;return n()?(a=e.clone(),e.add(r,t),a):null},hasNext:n}},a.prototype._prepIterateInputs=function(){var t,e,a,i,o,s;return t=1<=arguments.length?r.call(arguments,0):[],"number"==typeof t[0]?t:("string"==typeof t[0]&&(i=t.shift(),e=null!=(o=t.pop())?o:1,t.length&&(a=null!=(s=t[0])?s:!1)),n.isDuration(t[0])&&(i="milliseconds",e=t[0].as(i)),[e,i,a])},a.prototype._inner=function(t,e){var n,r,a,i,o;return null==t&&(t="milliseconds"),null==e&&(e=1),o=this._trueStart(),a=this._trueEnd(!0),o>o.clone().startOf(t)&&o.startOf(t).add(e,t),a<a.clone().endOf(t)&&a.startOf(t),r=o.twix(a).asDuration(t),n=r.get(t),i=n%e,a.subtract(i,t),[o,a]},a.prototype._lazyLang=function(){var t,r,i,s;if(r=this.start.lang(),null!=r&&this.end.lang()._abbr!==r._abbr&&this.end.lang(r._abbr),null==this.langData||this.langData._abbr!==r._abbr){if(e&&!o&&"en"!==r._abbr){try{i=require("./lang"),i(n,a)}catch(u){t=u}o=!0}return this.langData=null!=(s=null!=r?r._twix:void 0)?s:a.defaults}},a.prototype._formatFn=function(t,e){return this.langData[t].fn(e)},a.prototype._formatSlot=function(t){return this.langData[t].slot},a.prototype._formatPre=function(t,e){return"function"==typeof this.langData[t].pre?this.langData[t].pre(e):this.langData[t].pre},a.prototype.sameDay=t("sameDay","isSame('day')",function(){return this.isSame("day")}),a.prototype.sameYear=t("sameYear","isSame('year')",function(){return this.isSame("year")}),a.prototype.countDays=t("countDays","countOuter('days')",function(){return this.countOuter("days")}),a.prototype.daysIn=t("daysIn","iterate('days' [,minHours])",function(t){return this.iterate("days",t)}),a.prototype.past=t("past","isPast()",function(){return this.isPast()}),a.prototype.duration=t("duration","humanizeLength()",function(){return this.humanizeLength()}),a.prototype.merge=t("merge","union(other)",function(t){return this.union(t)}),a}(),i=function(t){return"function"==typeof Object.getPrototypeOf?Object.getPrototypeOf(t):"".__proto__===String.prototype?t.__proto__:t.constructor.prototype},a._extend(i(n.fn._lang),{_twix:a.defaults}),a.formatTemplate=function(t,e){return""+t+" - "+e},n.twix=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,a=t.apply(r,e);return Object(a)===a?a:r}(a,arguments,function(){})},n.fn.twix=function(){return function(t,e,n){n.prototype=t.prototype;var r=new n,a=t.apply(r,e);return Object(a)===a?a:r}(a,[this].concat(r.call(arguments)),function(){})},n.fn.forDuration=function(t,e){return new a(this,this.clone().add(t),e)},n.duration.fn.afterMoment=function(t,e){return new a(t,n(t).clone().add(this),e)},n.duration.fn.beforeMoment=function(t,e){return new a(n(t).clone().subtract(this),t,e)},n.twixClass=a,a},e&&(module.exports=n(require("moment"))),"function"==typeof define&&define("twix",["moment"],function(t){return n(t)}),null!=this.moment&&(this.Twix=n(this.moment))}.call(this),function(){function t(){function t(e){var n=t.ticks();e.append("rect").attr("class","background").attr("width",t.width()).attr("height",t.height()),e.selectAll(".tick").data(n).enter().append("line").attr("class","ticks").attr("x1",t.width()-O("tick_length")).attr("x2",t.width()).attr("y1",a.m).attr("y2",a.m),e.selectAll(".ticklabel").data(n).enter().append("text").attr("class","ticklabel").attr("x",t.width()-O("tick_length")-O("tick_padding")).attr("y",a.m).text(function(t){return t}).attr("text-anchor","end").attr("dy","0.35em"),e.append("line").attr("class","axisline").attr("x1",t.width()).attr("x2",t.width()).attr("y1",0).attr("y2",t.height())}var e,n,r,a=v(),i=d3.select("body").append("svg").attr("class","axis_categorical dummy").attr("width",0).attr("height",0).style("visibility","hidden"),o=y(i);return t.width=function(t){if(0===arguments.length){if(void 0===e){for(var n=a.ticks(),r=0,i=0;i<n.length;++i){var s=o.width(n[i]);s>r&&(r=s)}e=r+O("tick_length")+O("tick_padding")}return e}return e=t,this},t.height=function(t){return 0===arguments.length?r:(r=t,a.range([0,t]),this)},t.accept=function(t,e){var n=l(t,e);return"string"==n.type||"categorical"==n.type||"period"==n.type},t.variable=function(t){return 0===arguments.length?n:(n=t,this)},t.domain=function(t){if(0===arguments.length)return a.domain();var e=t.map(function(t){return t[n]}),r=e.filter(function(t,e,n){return n.indexOf(t)===e});return a.domain(r),this},t.ticks=function(){return a.ticks()},t.scale=function(t){return"object"==typeof t?a(t[n]).m:a(t).m},t.scale.l=function(t){return"object"==typeof t?a(t[n]).l:a(t).l},t.scale.u=function(t){return"object"==typeof t?a(t[n]).u:a(t).u},t.scale.w=function(t){var e;return e=a("object"==typeof t?t[n]:t),e.u-e.l},t}function e(){function t(){}var e,n,r,a=_();return t.width=function(t){return 0===arguments.length?n:(n=t,this)},t.height=function(t){return 0===arguments.length?r:(r=t,this)},t.accept=function(t,e){var n=l(t,e);return"number"==n.type},t.variable=function(t){return 0===arguments.length?e:(e=t,this)},t.domain=function(t){return 0===arguments.length?a.domain():void 0===e?this:(a.domain(d3.extent(t,function(t){return t[e]})),this)},t.ticks=function(){return a.ticks()},t.scale=function(n){return"object"==typeof n?t.scale(n[e]):a(n)},t}function n(){function t(){}var e,n,r,a=b();return t.width=function(t){return 0===arguments.length?n:(n=t,this)},t.height=function(t){return 0===arguments.length?r:(r=t,this)},t.accept=function(t,e){var n=l(t,e);return"categorical"==n.type||"period"==n.type},t.variable=function(t){return 0===arguments.length?e:(e=t,this)},t.domain=function(t,n){if(0===arguments.length)return a.domain();if(void 0===e)return this;var r=l(e,n),i=[];if("categorical"==r.type)i=r.categories.map(function(t){return t.name});else for(var o,s=t.map(function(t){return t[e]}).sort(),u=0;u<s.length;++u)s[u]!=o&&i.push(""+s[u]),o=s[u];return a.domain(i),this},t.ticks=function(){return a.ticks()},t.scale=function(t){return a("object"==typeof t?t[e]:t)},t}function r(t){function e(n){var r=e.width(),a=e.ticks();n.append("rect").attr("class","background").attr("width",r).attr("height",e.height()),t?(n.selectAll(".tick").data(a).enter().append("line").attr("class","tick").attr("x1",o).attr("x2",o).attr("y1",0).attr("y2",u.tick_length),n.selectAll(".ticklabel").data(a).enter().append("text").attr("class","ticklabel").attr("x",o).attr("y",u.tick_length+u.tick_padding).text(function(t){return t}).attr("text-anchor","middle").attr("dy","0.71em")):(n.selectAll(".tick").data(a).enter().append("line").attr("class","tick").attr("x1",r-u.tick_length).attr("x2",r).attr("y1",o).attr("y2",o),n.selectAll(".ticklabel").data(a).enter().append("text").attr("class","ticklabel").attr("x",u.padding).attr("y",o).text(function(t){return t}).attr("text-anchor","begin").attr("dy","0.35em"))}var n,r,a,i,o=w(),s=t,u={tick_length:5,tick_padding:2,padding:4},c=d3.select("body").append("svg").attr("class","linearaxis dummy").attr("width",0).attr("height",0).style("visibility","hidden"),d=y(c);return o.label_size(s?d.width:d.height),e.width=function(t){if(s)return 0===arguments.length?r:(r=t,o.range([0,r]),this);if(0===arguments.length){for(var e=o.ticks(),n=0,a=0;a<e.length;++a){var i=d.width(e[a]);i>n&&(n=i)}return r=n+u.tick_length+u.tick_padding+u.padding}return r=t,this},e.height=function(t){if(s){if(0===arguments.length){for(var e=o.ticks(),n=0,r=0;r<e.length;++r){var i=d.height(e[r]);i>n&&(n=i)}return a=n+u.tick_length+u.tick_padding+u.padding}return a=t,this}return 0===arguments.length?a:(a=t,o.range([a,0]),this)},e.accept=function(t,e){var n=l(t,e);return"number"==n.type},e.variable=function(t){return 0===arguments.length?n:(n=t,this)},e.domain=function(t,e){if(0===arguments.length)return o.domain();var r=d3.extent(t,function(t){return+t[n]}),a=l(n,e);return a.origin&&(i=a.origin),void 0!==i&&(r[0]>i&&(r[0]=i),r[1]<i&&(r[1]=i)),o.domain(r).nice(),this},e.origin=function(t){return 0===arguments.length?i:(i=t,this)},e.ticks=function(){return o.ticks()},e.scale=function(t){return o("object"==typeof t?t[n]:t)},e}function a(){var t,e=k(),n={tick_length:[15,30,45]},r=function(t){var r=e.ticks(),a={},i=0;e.has_month()&&(a.month=n.tick_length[i++]),e.has_quarter()&&(a.quarter=n.tick_length[i++]),a.year=n.tick_length[i++],t.selectAll("line.tick-end").data(r).enter().append("line").attr("class",function(t){var e=t.last?" ticklast":"";return"tick tickend tick"+t.type+e}).attr("x1",function(t){return e(t.period.end)}).attr("y1",0).attr("x2",function(t){return e(t.period.end)}).attr("y2",function(t){return a[t.type]}),t.selectAll("line.tick-start").data(r).enter().append("line").attr("class",function(t){var e=t.last?" ticklast":"";return"tick tickstart tick"+t.type+e}).attr("x1",function(t){return e(t.period.start)}).attr("y1",0).attr("x2",function(t){return e(t.period.start)}).attr("y2",function(t){return a[t.type]}),t.selectAll("text").data(r).enter().append("text").attr("class",function(t){return"ticklabel ticklabel"+t.type}).attr("x",function(t){return e(t.date)}).attr("y",function(t){return a[t.type]}).attr("text-anchor","middle").text(function(t){return"month"==t.type?t.period.start.format("MMM").charAt(0):"quarter"==t.type?"Q"+t.period.start.format("Q"):t.label})};return r.height=function(t){if(0===arguments.length){if(void 0===t){var r=0;return e.has_month&&r++,e.has_quarter&&r++,n.tick_length[r]}return t}return t=height,this},r.width=function(t){if(0===arguments.length){var n=e.range();return n[1]-n[0]}return e.range([0,t]),this},r.accept=function(t,e){var n=l(t,e);return"date"==n.type},r.variable=function(e){return 0===arguments.length?t:(t=e,this)},r.domain=function(n){if(0===arguments.length)return e.domain();var r=n.map(function(e){return e[t]});return e.domain(r),this},r.ticks=function(){var t=e.ticks();return t.filter(function(t){return"year"==t.type})},r.scale=function(n){return e("object"==typeof n?n.hasOwnProperty("date")&&n.hasOwnProperty("period")?n:n[t]:n)},r}function i(){function t(){}function e(t,e,r){if(void 0!==n){var a=l(n,e);void 0!==a.map&&a.map!=i&&(u=!0,d3.json(a.map,function(t){i=a.map,r(t),u=!1}))}}var n,r,a,i,o,s={};t.width=function(t){return 0===arguments.length?r:(c=c||r!=t,r=t,this)},t.height=function(t){return 0===arguments.length?a:(c=c||a!=t,a=t,this)},t.accept=function(t,e){var n=l(t,e);return"string"==n.type},t.variable=function(t){return 0===arguments.length?n:(n=t,this)};var u=!1;t.map_loaded=function(){return!u},t.domain=function(t,r){return 0!==arguments.length?(e(t,r,function(t){o=t,c=!0;var e=l(n,r),a=e.regionid||"id";for(var i in o.features){var u=o.features[i].properties[a];s[u]=i}}),this):void 0},t.scale=function(e){return"object"==typeof e?t.scale(e[n]):(t.update_projection(),h(o.features[s[e]]))};var c=!0,d=d3.geo.transverseMercator().rotate([-5.38720621,-52.1551744]).scale(1).translate([0,0]),h=d3.geo.path().projection(d);return t.update_projection=function(){if(c&&o){d.scale(1).translate([0,0]),h=d3.geo.path().projection(d);var t=h.bounds(o),e=.95/Math.max((t[1][0]-t[0][0])/r,(t[1][1]-t[0][1])/a),n=[(r-e*(t[1][0]+t[0][0]))/2,(a-e*(t[1][1]+t[0][1]))/2];d.scale(e).translate(n),c=!1}},t}function o(){function t(){}var e,n,r=D();return t.width=function(t){return 0===arguments.length?e:(e=t,this)},t.height=function(t){return 0===arguments.length?n:(n=t,this)},t.accept=function(t,e){var n=l(t,e);return"number"==n.type},t.variable=function(t){return 0===arguments.length?variable:(variable=t,this)},t.domain=function(t){return 0===arguments.length?r.domain():void 0===variable?this:(r.domain(d3.extent(t,function(t){return t[variable]})),this)},t.ticks=function(){return r.ticks()},t.scale=function(e){return"object"==typeof e?t.scale(e[variable]):r(e)},t}function s(){function t(){}var e,n,r,a;return t.width=function(t){return 0===arguments.length?n:(n=t,this)},t.height=function(t){return 0===arguments.length?r:(r=t,this)},t.accept=function(t,e){var n=l(t,e);return"categorical"==n.type||"period"==n.type},t.variable=function(t){return 0===arguments.length?e:(e=t,this)},t.domain=function(t,n){if(0===arguments.length)return a;if(void 0===e)return this;var r=l(e,n),i=[];if("categorical"==r.type)i=r.categories.map(function(t){return t.name});else for(var o,s=t.map(function(t){return t[e]}).sort(),u=0;u<s.length;++u)s[u]!=o&&i.push(""+s[u]),o=s[u];return a=i,this},t.ticks=function(){return a},t.scale=function(t){return a.indexOf(t)},t}function u(t){var e=0,n=function(n){return t[e](n)};return n.height=function(n){if(0===arguments.length)return t[e].height();for(var r=0;r<t.length;++r)t[r].height(n);return this},n.width=function(n){if(0===arguments.length)return t[e].width();for(var r=0;r<t.length;++r)t[r].width(n);return this},n.accept=function(e,n){for(var r=0;r<t.length;++r)if(t[r].accept(e,n))return!0;return!1},n.variable=function(n){if(0===arguments.length)return t[e].variable();for(var r=0;r<t.length;++r)t[r].variable(n);return this},n.domain=function(r,a){if(0===arguments.length)return t[e].variable();for(var i=n.variable(),o=0;o<t.length;++o)if(t[o].accept(i,a)){e=o;break}return t[e].domain(r,a),this},n.ticks=function(){return t[e].ticks()},n.scale=function(n){return t[e].scale(n)},n}function l(t,e){for(var n=0;n<e.fields.length;n++)if(e.fields[n].name==t)return e.fields[n];return void 0}function c(t){function e(t){return 0!==t.start.month()?!1:1!=t.start.date()?!1:1==t.length("years")}function n(t){return t.start.month()%3!==0?!1:1!=t.start.date()?!1:3==t.length("months")}function r(t){return 1!=t.start.date()?!1:1==t.length("months")}var a,i,o,s,u,l=/^(\d{4})$/,c=/^(\d{4})[Mm-]{1}(\d{1,2})$/,d=/^(\d{4})[Qq]{1}(\d{1,2})$/;if(l.test(t))return t=l.exec(t),u=+t[1],a=moment([+t[1]]),i=moment.duration(1,"year"),o=i.afterMoment(a),s=a.add(moment.duration(o.length()/2)),{type:"year",date:s,period:o};if(c.test(t))return t=c.exec(t),a=moment([+t[1],+t[2]-1]),i=moment.duration(1,"month"),o=i.afterMoment(a),s=a.add(moment.duration(o.length()/2)),{type:"month",date:s,period:o};if(d.test(t)){t=d.exec(t),u=+t[1];{+t[2]}return a=moment([+t[1],3*(+t[2]-1)]),i=moment.duration(3,"month"),o=i.afterMoment(a),s=a.add(moment.duration(o.length()/2)),{type:"quarter",date:s,period:o}}if("string"==typeof t){if(t=t.split("/"),a=moment(t[0],moment.ISO_8601),1==t.length)return i=moment.duration(0),{type:"date",date:a,period:i.afterMoment(a)};i=moment.duration(t[1]),o=i.afterMoment(a),s=a.add(moment.duration(o.length()/2));var h="period";return e(o)?h="year":n(o)?h="quarter":r(o)&&(h="month"),{type:h,date:s,period:o}}return a=moment(t),i=moment.duration(0),{type:"date",date:a,period:i.afterMoment(a)}}function d(t,e,n,r){var a=d3.select("body").append("svg").attr("class","dummy graph graph-"+n).attr("width",0).attr("height",0).style("visibility","hidden"),i=y(a),o=h(t,e,function(a){function s(e){return t.column.variable()?e[t.column.variable()]:1}function u(e){return t.row.variable()?e[t.row.variable()]:1}for(var c in t)t[c].domain(o.data(),o.schema());for(var d,h,f=t.column.variable()?t.column.ticks().length:1,m=t.row.variable()?t.row.ticks().length:1,p=l(t.x.variable(),o.schema()),g=p.title,y=i.height(g)+O("label_padding"),v=l(t.y.variable(),o.schema()),_=v.title,b=t.row.variable()?3*y:0,w=t.column.variable()?3*y:0,k=0;2>k;++k)d=o.width()-O("padding")[1]-O("padding")[3]-t.y.width()-y-b,d=(d-(f-1)*O("sep"))/f,t.x.width(d).domain(o.data(),o.schema()),h=o.height()-O("padding")[0]-O("padding")[2]-t.x.height()-y-w,h=(h-(m-1)*O("sep"))/m,t.y.height(h).domain(o.data(),o.schema());var x=t.y.width()+O("padding")[1]+y,D=O("padding")[2]+w;a=a.append("g").attr("class","graph graph-"+n);var M=D+.5*(o.height()-O("padding")[0]-O("padding")[2]-t.x.height()-y),Y=x+.5*(o.width()-O("padding")[1]-O("padding")[3]-t.y.width()-y);if(a.append("text").attr("class","label label-y").attr("x",O("padding")[1]).attr("y",M).attr("text-anchor","middle").text(_).attr("transform","rotate(90 "+O("padding")[1]+" "+M+")"),a.append("text").attr("class","label label-x").attr("x",Y).attr("y",o.height()-O("padding")[0]).attr("text-anchor","middle").text(g),t.row.variable()){var S=o.width()-O("padding")[3]-y,F=l(t.row.variable(),o.schema()),T=F.title;a.append("text").attr("class","label label-y").attr("x",S).attr("y",M).attr("text-anchor","middle").text(T).attr("transform","rotate(90 "+S+" "+M+")")}if(t.column.variable()){var A=l(t.column.variable(),o.schema()),P=A.title;a.append("text").attr("class","label label-y").attr("x",Y).attr("y",O("padding")[2]).attr("dy","0.71em").attr("text-anchor","middle").text(P)}var W=d3.nest().key(s).key(u).entries(o.data());for(k=0;k<W.length;++k){var z=W[k].values;D=O("padding")[2]+w;for(var G=0;G<z.length;++G){if(G==z.length-1&&a.append("g").attr("class","axis axis-x").attr("transform","translate("+x+","+(D+h)+")").call(t.x),0===k&&a.append("g").attr("class","axis axis-y").attr("transform","translate("+(x-t.y.width())+","+D+")").call(t.y),k==W.length-1&&t.row.variable()){var C=t.row.ticks()[G],H=a.append("g").attr("class","axis axis-row").attr("transform","translate("+(x+d)+","+D+")");H.append("rect").attr("class","background").attr("width",y+2*O("tick_padding")).attr("height",h),H.append("text").attr("class","ticklabel").attr("x",0).attr("y",h/2).attr("transform","rotate(90 "+(y-O("tick_padding"))+" "+h/2+")").attr("text-anchor","middle").attr("dy","0.35em").text(C)}if(0===G&&t.column.variable()){var I=t.column.ticks()[k],U=y+2*O("tick_padding"),L=a.append("g").attr("class","axis axis-column").attr("transform","translate("+x+","+(D-U)+")");L.append("rect").attr("class","background").attr("width",d).attr("height",y+2*O("tick_padding")),L.append("text").attr("class","ticklabel").attr("x",d/2).attr("y",O("tick_padding")).attr("text-anchor","middle").attr("dy","0.71em").text(I)}var E=a.append("g").attr("class","panel").attr("transform","translate("+x+","+D+")");E.append("rect").attr("class","background").attr("width",d).attr("height",h);var q=t.x.ticks();E.selectAll("line.gridx").data(q).enter().append("line").attr("class","grid gridx").attr("x1",t.x.scale).attr("x2",t.x.scale).attr("y1",0).attr("y2",h);var j=t.y.ticks();E.selectAll("line.gridy").data(j).enter().append("line").attr("class","grid gridy").attr("x1",0).attr("x2",d).attr("y1",t.y.scale).attr("y2",t.y.scale);var N=E.append("g").classed("crosshairs",!0);N.append("line").classed("hline",!0).attr("x1",0).attr("y1",0).attr("x2",t.x.width()).attr("y2",0).style("visibility","hidden"),N.append("line").classed("vline",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",t.y.height()).style("visibility","hidden"),r(E,z[G].values),D+=t.y.height()+O("sep")}x+=t.x.width()+O("sep")}e.ready.call(a)});return o}function h(t,e,n){var r,a,i,o;return n.axes=function(){return d3.keys(t)},n.width=function(t){return 0===arguments.length?r:(r=t,this)},n.height=function(t){return 0===arguments.length?a:(a=t,this)},n.accept=function(e,n){if(arguments.length>1)return void 0===t[n]?!1:t[n].accept(e,o);for(var r in t)if(void 0===e[r]){if(t[r].required)return!1}else{var a=t[r].accept(e[r],o);if(!a)return!1}return!0},n.assign=function(e){for(var n in t)t[n].variable(e[n]);return this},n.schema=function(t){return 0===arguments.length?o:(o=t,this)},n.data=function(t,e){return 0===arguments.length?i:(i=t,arguments.length>1&&n.schema(e),this)},n.dispatch=function(){return e},n}function f(){var e={x:r(!0).origin(0),y:t(),colour:n(),column:s(),row:s()};e.x.required=!0,e.y.required=!0;var a=d3.dispatch("mouseover","mouseout","click","ready"),i=d(e,a,"bar",function(t,n){function r(t){return e.colour.variable()?t[e.colour.variable()]:1}function a(t){var n=e.x.scale(t);return n<e.x.scale(c)?n:e.x.scale(c)}function i(t){return Math.abs(e.x.scale(t)-e.x.scale(c))}function o(t){return e.y.scale.l(t)+d*e.y.scale.w(t)/l}function s(t){return e.y.scale.w(t)/l}for(var u=d3.nest().key(r).entries(n),l=u.length,c=e.x.origin(),d=0;d<u.length;++d){var h=e.colour.scale(u[d].key);t.selectAll("rect."+h).data(u[d].values).enter().append("rect").attr("class","bar "+h).attr("x",a).attr("width",i).attr("y",o).attr("height",s)}t.append("line").attr("class","origin").attr("x1",e.x.scale(c)).attr("x2",e.x.scale(c)).attr("y1",0).attr("y2",e.y.height())});if(a.on("ready",function(){var t=this;this.selectAll(".colour").on("mouseover",function(n){var r=e.colour.variable(),i=r?n.key||n[r]:void 0;a.mouseover.call(t,r,i,n)}).on("mouseout",function(n){var r=e.colour.variable(),i=r?n.key||n[r]:void 0;a.mouseout.call(t,r,i,n)}).on("click",function(n){var r=e.colour.variable(),i=r?n.key||n[r]:void 0;a.click.call(t,r,i,n)})}),a.on("mouseover",function(t,n,r){if(t){var a=e.colour.scale(""+n),i=/\bcolour([0-9]+)\b/,o=i.exec(a)[0];this.selectAll(".colour").classed("colourlow",!0),this.selectAll("."+o).classed({colourhigh:!0,colourlow:!1})}this.selectAll(".hline").attr("y1",e.y.scale(r)).attr("y2",e.y.scale(r)).style("visibility","visible"),this.selectAll(".vline").attr("x1",e.x.scale(r)).attr("x2",e.x.scale(r)).style("visibility","visible")}),a.on("mouseout",function(){this.selectAll(".colour").classed({colourhigh:!1,colourlow:!1}),this.selectAll(".hline").style("visibility","hidden"),this.selectAll(".vline").style("visibility","hidden")}),void 0!==d3.tip){var o=d3.tip().direction("se").attr("class","tip tip-bar").html(function(t,e,n){var r=i.schema(),a="";for(var o in r.fields)a+=r.fields[o].title+": "+n[r.fields[o].name]+"</br>";return a});a.on("ready.tip",function(){this.call(o)}),a.on("mouseover.tip",function(t,e,n){o.show(t,e,n)}),a.on("mouseout.tip",function(t,e,n){o.hide(t,e,n)})}return i}function m(){var t={x:r(!0),y:r(!1),object:n(),size:o(),colour:n(),column:s(),row:s()};t.x.required=!0,t.y.required=!0,t.object.required=!0;var e=d3.dispatch("mouseover","mouseout","click","ready"),a=d(t,e,"bubble",function(e,n){function r(e){return t.colour.variable()?e[t.colour.variable()]:1}for(var a=d3.nest().key(r).entries(n),i=0;i<a.length;++i)e.selectAll("circle.bubble"+i).data(a[i].values).enter().append("circle").attr("class","bubble bubble"+i+" "+t.colour.scale(a[i].key)).attr("cx",t.x.scale).attr("cy",t.y.scale).attr("r",t.size.scale)});if(e.on("ready",function(){var n=this;this.selectAll(".colour").on("mouseover",function(r){var a=t.colour.variable(),i=a?r.key||r[a]:void 0;e.mouseover.call(n,a,i,r)}).on("mouseout",function(r){var a=t.colour.variable(),i=a?r.key||r[a]:void 0;e.mouseout.call(n,a,i,r)}).on("click",function(r){var a=t.colour.variable(),i=a?r.key||r[a]:void 0;e.click.call(n,a,i,r)})}),e.on("mouseover",function(e,n,r){if(e){var a=t.colour.scale(""+n),i=/\bcolour([0-9]+)\b/,o=i.exec(a)[0];this.selectAll(".colour").classed("colourlow",!0),this.selectAll("."+o).classed({colourhigh:!0,colourlow:!1})}this.selectAll(".hline").attr("y1",t.y.scale(r)).attr("y2",t.y.scale(r)).style("visibility","visible"),this.selectAll(".vline").attr("x1",t.x.scale(r)).attr("x2",t.x.scale(r)).style("visibility","visible")}),e.on("mouseout",function(){this.selectAll(".colour").classed({colourhigh:!1,colourlow:!1}),this.selectAll(".hline").style("visibility","hidden"),this.selectAll(".vline").style("visibility","hidden")}),void 0!==d3.tip){var i=d3.tip().direction("se").attr("class","tip tip-bubble").html(function(t,e,n){var r=a.schema(),i="";for(var o in r.fields)i+=r.fields[o].title+": "+n[r.fields[o].name]+"</br>";return i});e.on("ready.tip",function(){this.call(i)}),e.on("mouseover.tip",function(t,e,n){i.show(t,e,n)}),e.on("mouseout.tip",function(t,e,n){i.hide(t,e,n)})}return a}function p(){var t={x:u([r(!0),a()]),y:r(!1),colour:n(),column:s(),row:s()};t.x.required=!0,t.y.required=!0;var e=d3.dispatch("mouseover","mouseout","pointover","pointout","click","ready"),i=d(t,e,"line",function(e,n){function r(e){return t.colour.variable()?e[t.colour.variable()]:1}for(var a=d3.nest().key(r).entries(n),i=d3.svg.line().x(t.x.scale).y(t.y.scale),o=0;o<a.length;++o)e.append("path").attr("d",i(a[o].values)).attr("class",t.colour.scale(a[o].key)).datum(a[o]);for(o=0;o<a.length;++o){e.selectAll("circle.circle"+o).data(a[o].values).enter().append("circle").attr("class","circle"+o+" "+t.colour.scale(a[o].key)).attr("cx",t.x.scale).attr("cy",t.y.scale).attr("r",O("point_size"))}});if(e.on("ready",function(){var n=this;this.selectAll(".colour").on("mouseover",function(r){var a=t.colour.variable(),i=a?r.key||r[a]:void 0;e.mouseover.call(n,a,i,r),r.key||e.pointover.call(n,a,i,r)}).on("mouseout",function(r){var a=t.colour.variable(),i=a?r.key||r[a]:void 0;e.mouseout.call(n,a,i,r),r.key||e.pointout.call(n,a,i,r)}).on("click",function(r){var a=t.colour.variable(),i=a?r.key||r[a]:void 0;e.click.call(n,a,i,r)})}),e.on("mouseover",function(e,n){if(e){var r=t.colour.scale(""+n),a=/\bcolour([0-9]+)\b/,i=a.exec(r)[0];this.selectAll(".colour").classed("colourlow",!0),this.selectAll("."+i).classed({colourhigh:!0,colourlow:!1})}}),e.on("mouseout",function(){this.selectAll(".colour").classed({colourhigh:!1,colourlow:!1})}),e.on("pointover",function(e,n,r){this.selectAll(".hline").attr("y1",t.y.scale(r)).attr("y2",t.y.scale(r)).style("visibility","visible"),this.selectAll(".vline").attr("x1",t.x.scale(r)).attr("x2",t.x.scale(r)).style("visibility","visible")}),e.on("pointout",function(){this.selectAll(".hline").style("visibility","hidden"),this.selectAll(".vline").style("visibility","hidden")}),void 0!==d3.tip){var o=d3.tip().direction("se").attr("class","tip tip-line").html(function(t,e,n){var r=i.schema(),a="";for(var o in r.fields)a+=r.fields[o].title+": "+n[r.fields[o].name]+"</br>";return a});e.on("ready.tip",function(){this.call(o)}),e.on("pointover.tip",function(t,e,n){o.show(t,e,n)}),e.on("pointout.tip",function(t,e,n){o.hide(t,e,n)})}return i}function g(){var t={region:i(),colour:e(),column:s(),row:s()};t.region.required=!0,t.colour.required=!0;var n=d3.dispatch("ready","mouseover","mouseout","click"),r=d3.select("body").append("svg").attr("class","dummy graph graph-map").attr("width",0).attr("height",0).style("visibility","hidden"),a=y(r),o=h(t,n,function(e){function r(e){return t.column.variable()?e[t.column.variable()]:1}function i(e){return t.row.variable()?e[t.row.variable()]:1}t.region.domain(o.data(),o.schema()),t.colour.domain(o.data(),o.schema()),t.column.domain(o.data(),o.schema()),t.row.domain(o.data(),o.schema());var s=t.column.variable()?t.column.ticks().length:1,u=t.row.variable()?t.row.ticks().length:1,c=a.height("variable")+O("label_padding"),d=t.row.variable()?3*c:0,h=t.column.variable()?3*c:0,f=(o.width()-O("padding","map")[1]-O("padding","map")[3]-d-(s-1)*O("sep","map"))/s,m=(o.height()-O("padding","map")[0]-O("padding","map")[2]-h-(u-1)*O("sep","map"))/u,p=O("padding","map")[1],g=O("padding","map")[2];t.region.width(f).height(m),e=e.append("g").attr("class","graph graph-map");var y=g+.5*(o.height()-O("padding")[0]-O("padding")[2]-c-h)+h,v=p+.5*(o.width()-O("padding")[1]-O("padding")[3]-c-d);if(t.row.variable()){var _=o.width()-O("padding")[3]-c,b=l(t.row.variable(),schema),w=b.title;e.append("text").attr("class","label label-y").attr("x",_).attr("y",y).attr("text-anchor","middle").text(w).attr("transform","rotate(90 "+_+" "+y+")")}if(t.column.variable()){var k=l(t.column.variable(),schema),x=k.title;e.append("text").attr("class","label label-y").attr("x",v).attr("y",O("padding")[2]).attr("dy","0.71em").attr("text-anchor","middle").text(x)}S(t.region.map_loaded,function(){for(var a=d3.nest().key(r).key(i).entries(o.data()),s=0;s<a.length;++s){for(var u=a[s].values,l=O("padding","map")[2]+h,d=0;d<u.length;++d){if(s==a.length-1&&t.row.variable()){var g=t.row.ticks()[d],y=e.append("g").attr("class","axis axis-row").attr("transform","translate("+(p+f)+","+l+")");y.append("rect").attr("class","background").attr("width",c+2*O("tick_padding")).attr("height",m),y.append("text").attr("class","ticklabel").attr("x",0).attr("y",m/2).attr("transform","rotate(90 "+(c-O("tick_padding"))+" "+m/2+")").attr("text-anchor","middle").attr("dy","0.35em").text(g)
}if(0===d&&t.column.variable()){var v=t.column.ticks()[s],_=c+2*O("tick_padding"),b=e.append("g").attr("class","axis axis-column").attr("transform","translate("+p+","+(l-_)+")");b.append("rect").attr("class","background").attr("width",f).attr("height",c+2*O("tick_padding")),b.append("text").attr("class","ticklabel").attr("x",f/2).attr("y",O("tick_padding")).attr("text-anchor","middle").attr("dy","0.71em").text(v)}var w=e.append("g").attr("class","map").attr("transform","translate("+p+","+l+")");w.append("rect").attr("class","background").attr("width",f).attr("height",m),w.selectAll("path").data(u[d].values).enter().append("path").attr("d",t.region.scale).attr("class",t.colour.scale),l+=m+O("sep","map")}p+=f+O("sep","map")}e.selectAll("path").on("mouseover",function(r){var a=r[t.region.variable()];n.mouseover.call(e,t.region.variable(),a,r)}).on("mouseout",function(r){var a=r[t.region.variable()];n.mouseout.call(e,t.region.variable(),a,r)}).on("click",function(r){var a=r[t.region.variable()];n.click.call(e,t.region.variable(),a,r)}),n.ready.call(e)})});if(n.on("mouseover.graph",function(t,e){this.selectAll("path").classed("colourlow",!0),this.selectAll("path").filter(function(n){return n[t]==e}).classed({colourhigh:!0,colourlow:!1})}),n.on("mouseout.graph",function(){this.selectAll("path").classed({colourhigh:!1,colourlow:!1})}),void 0!==d3.tip){var u=d3.tip().direction("se").attr("class","tip tip-map").html(function(t,e,n){var r=o.schema(),a="";for(var i in r.fields)a+=r.fields[i].title+": "+n[r.fields[i].name]+"</br>";return a});n.on("ready.tip",function(){this.call(u)}),n.on("mouseover.tip",function(t,e,n){u.show(t,e,n)}),n.on("mouseout.tip",function(t,e,n){u.hide(t,e,n)})}return o}function y(t){function e(t){if(r[t])return r[t];if(!n)return[void 0,void 0];var e=n.append("text").text(t),a=e[0][0].getBBox(),i=[1.2*a.width,.65*a.height];return e.remove(),r[t]=i,i}var n=t,r={};return e.svg=function(t){return 0===arguments.length?n:(n=t,this)},e.width=function(t){var n=e(t);return n[0]},e.height=function(t){var n=e(t);return n[1]},e}function v(){function t(t){var r=e.indexOf(t);if(0>r)return{l:void 0,m:void 0,u:void 0};var a=(n[1]-n[0])/e.length,i=a*(r+.5),o=a*(1-O("bar_padding"))*.5;return{l:i-o,m:i,u:i+o}}var e,n=[0,1];return t.l=function(e){return t(e).l},t.m=function(e){return t(e).m},t.u=function(e){return t(e).u},t.domain=function(t){return 0===arguments.length?e:(e=t,this)},t.range=function(t){return 0===arguments.length?n:(n=t,this)},t.ticks=function(){return e},t}function _(){function t(t){if(void 0===e)return n+" "+n+"n1 "+n+1;var a=e[1]-e[0],i=Math.sqrt(.9999*(t-e[0]))/Math.sqrt(a),o=Math.floor(i*r);return n+" "+n+"n"+r+" "+n+(o+1)}var e,n="chloro",r=9;return t.domain=function(t){return 0===arguments.length?e:(e=t,this)},t.range=function(t){return 0===arguments.length?n:(n=t,this)},t.ticks=function(){for(var t=(e[1]-e[0])/r,n=e[0],a=[],i=0;r>=i;++i)a.push(n),n+=t;return a},t}function b(){function t(t){if(void 0===e)return r+" "+r+"n1 "+r+1;var a=e.indexOf(t);return r+" "+r+"n"+n+" "+r+(a+1)}var e,n,r="colour";return t.domain=function(t){return 0===arguments.length?e:(e=t,n=t.length,this)},t.range=function(t){return 0===arguments.length?r:(r=t,this)},t.ticks=function(){return e},t}function w(){function t(t){return a(t)}function e(t){var e="function"==typeof i?i(t):i;return e+=o}var n,r,a=d3.scale.linear(),i=20,o=5,s=10,u=!0;return t.domain=function(t){return t=a.domain(t),r=void 0,n=void 0,0===arguments.length?t:this},t.range=function(t){return t=a.range(t),r=void 0,n=void 0,0===arguments.length?t:this},t.label_size=function(t){return 0===arguments.length?i:(i=t,this)},t.nticks=function(t){return 0===arguments.length?s:(s=t,this)},t.inside=function(t){return 0===arguments.length?u:(u=t?!0:!1,this)},t.nice=function(){var t=a.range(),i=a.domain(),o=Math.abs(t[1]-t[0]),l=Y(i[0],i[1],s,e,o);if(u){var c=e(l.labels[0]),d=e(l.labels[l.labels.length-1]),h=c/2+d/2;l=Y(i[0],i[1],s,e,o-h),a.range(t[0]<t[1]?[t[0]+c/2,t[1]-d/2]:[t[0]-c/2,t[1]+d/2])}return domain=[l.lmin,l.lmax],a.domain([l.lmin,l.lmax]),n=l.labels,r=l.ndec,this},t.ticks=function(){return void 0===n?a.ticks(s):n.map(function(t){return M(t,"",r)})},t}function k(){function t(t){return t instanceof Date||moment.isMoment(t)?n(t):t&&t.date&&t.period?void n(t.date):(t=""+t,n(c(t).date))}var e,n=d3.time.scale(),r=!1,a=!1;return t.has_month=function(){return r},t.has_quarter=function(){return a},t.domain=function(t){var i=t.map(c);return e=d3.extent(i,function(t){return t.period.start.year()}),n.domain([new Date(e[0]+"-01-01"),new Date(e[1]+1+"-01-01")]),r=i.reduce(function(t,e){return t||"month"==e.type},!1),a=i.reduce(function(t,e){return t||"quarter"==e.type},!1),this},t.range=function(t){return 0===arguments.length?n.range():(n.range(t),this)},t.ticks=function(){for(var n=[],r=e[0];r<=e[1];r++){var a=c(r+"-01-01/P1Y");if(a.last=r==e[1],a.label=r,n.push(a),t.has_quarter())for(var i=0;4>i;i++)a=c(r+"-"+zeroPad(3*i+1,2)+"-01/P3M"),a.last=3==i,a.label=i+1,n.push(a);if(t.has_month())for(var o=0;12>o;o++)a=c(r+"-"+zeroPad(o+1,2)+"-01/P1M"),a.last=t.has_quarter()&&(o+1)%3===0||11==o,a.label=o+1,n.push(a)}return n},t}function D(){function t(t){if(void 0===n)return O("default_bubble");var r=void 0===e?O("max_bubble"):e;return r*Math.sqrt(t)/Math.sqrt(n[1])}var e,n;return t.domain=function(t){return 0===arguments.length?n:(n=d3.extent(t),this)},t.range=function(t){return 0===arguments.length?void 0===e?O("max_bubble"):e:(e=d3.max(t),this)},t.ticks=function(){return void 0},t}function M(t,e,n,r,a){if(isNaN(t))return"";if(void 0===e&&(e=""),void 0===r&&(r="."),void 0===a&&(a=""),t=void 0!==n?t.toFixed(n):t.toString(),x=t.split("."),x1=x[0],x2=x.length>1?r+x[1]:"",""!==a)for(var i=/(\d+)(\d{3})/;i.test(x1);)x1=x1.replace(i,"$1"+a+"$2");return x1+x2+e}function Y(t,e,n,r,a,i,o,s,u,l){function c(t,e,n,r,a,i){for(var o=n*a/(e-t),s=t;1e-10>=s-e;s+=n){var u=r(s,i);if(u>o)return!0}return!1}function d(t,e,n,i,o,s){o=o||[10,1,5,2,2.5,3,4,1.5,7,6,8,9],u=u||[1,0,0,0,-1,0,0,-1,0,0,0,0],s=s||.8,i=i||n;for(var l,d=n-1,h=(e-t)/d,f=Math.floor(Math.log(h)/Math.LN10),m=Math.pow(10,f),p=1-Math.abs(n-i)/i,g=0;g<o.length;g++){var y=o[g]*m,v=Math.floor(t/y)*y,_=v+d*y,b=f+u[g]<0?Math.abs(f+u[g]):0;if(t>=v&&_>=e){var w=1-(g-(0>=v&&_>=0))/o.length,k=(e-t)/(_-v);if(k>s&&!c(v,_,y,r,a,b)){var x=p+w+k;(void 0===l||x>l.score)&&(l={lmin:v,lmax:_,lstep:y,score:x,ndec:b})}}}return l}t=Number(t),e=Number(e),Math.abs(t-e)<1e-10&&(t=.96*t,e=1.04*e),r=r||function(){return 0},a=a||1,s=s||[10,1,5,2,2.5,3,4,1.5,7,6,8,9],u=u||[1,0,0,0,-1,0,0,-1,0,0,0,0],l=l||.8,i=i||2,o=o||Math.ceil(6*n);var h={lmin:t,lmax:e,lstep:e-t,score:-1e8,ndec:0},f=String(h.lstep).split(".");h.ndec=f.length>1?f[1].length:0;for(var m=i;o>=m;m++){var p=d(t,e,m,n,s,l);void 0!==p&&(void 0===h||p.score>h.score)&&(h=p)}for(var g=[],y=h.lmin;y-h.lmax<=1e-10;y+=h.lstep)g.push(y);return h.labels=g,h}grph={},void 0===grph.axis&&(grph.axis={}),grph.axis.categorical=t(),void 0===grph.axis&&(grph.axis={}),grph.axis.chloropleth=e(),void 0===grph.axis&&(grph.axis={}),grph.axis.colour=n(),void 0===grph.axis&&(grph.axis={}),grph.axis.linear=r(),void 0===grph.axis&&(grph.axis={}),grph.axis.period=a();var S=function(t,e){t()?e():setTimeout(function(){S(t,e)},100)};void 0===grph.axis&&(grph.axis={}),grph.axis.linear=r(),void 0===grph.axis&&(grph.axis={}),grph.axis.size=o(),void 0===grph.scale&&(grph.scale={}),grph.scale.categorical=v,void 0===grph.scale&&(grph.scale={}),grph.scale.chloropleth=_(),void 0===grph.scale&&(grph.scale={}),grph.scale.colour=b(),void 0===grph.scale&&(grph.scale={}),grph.scale.linear=w(),void 0===grph.scale&&(grph.scale={}),grph.scale.period=k(),void 0===grph.scale&&(grph.scale={}),grph.scale.size=D();var O=function(){function t(t,n){return 0===arguments.length?O:2===arguments.length&&void 0!==e[n]&&void 0!==e[n][t]?e[n][t]:e.default[t]}var e={"default":{padding:[2,2,2,2],label_padding:4,sep:8,point_size:4,max_bubble:20,default_bubble:5,bar_padding:.4,tick_length:5,tick_padding:2}};return t.set=function(t,n,r){if(2===arguments.length)return e.default[t]=n,this;if(3===arguments.length)return void 0===e[n]&&(e[n]={}),e[n][t]=r,this;throw new Error("Need at leat two arguments.")},t}();grph.settings=O,format_numeric=function(t,e,n,r,a){if(isNaN(t))return"";if(void 0===e&&(e=""),void 0===r&&(r=","),void 0===a&&(a=" "),t=void 0!==n?t.toFixed(n):t.toString(),x=t.split("."),x1=x[0],x2=x.length>1?r+x[1]:"",""!==a)for(var i=/(\d+)(\d{3})/;i.test(x1);)x1=x1.replace(i,"$1"+a+"$2");return x1+x2+e},grph.line=p,grph.map=g,grph.bubble=m,grph.bar=f,this.grph=grph}();